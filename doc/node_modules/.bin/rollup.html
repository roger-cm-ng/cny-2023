<!DOCTYPE html>
<html>
<head>
  <title>rollup</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../doc-style.css" />
  <script src="../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../";
    var thisFile = "node_modules/.bin/rollup";
    var defaultSidebar = true;
  </script>
  <script src="../../doc-script.js"></script>

</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

      <div class="heading h1">
        <a href="#sourcemappingurlrollup.map">sourceMappingURL=rollup.map</a>
      </div>

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container">
    <div class="background highlight"></div>
<table cellpadding="0" cellspacing="0">
  <tbody>
    
      <tr>
        <td class="docs">
          <h1>rollup</h1>
        </td>
        <td class="code highlight"></td>
      </tr>
    
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-1" id="section-1"></a>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-meta">#!/usr/bin/env node</span>

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-2" id="section-2"></a>
</div>
<div class="dox">
<div class="summary">
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-meta">'use strict'</span>;

<span class="hljs-built_in">Object</span>.defineProperties(exports, { <span class="hljs-attr">__esModule</span>: { <span class="hljs-attr">value</span>: <span class="hljs-literal">true</span> }, [<span class="hljs-built_in">Symbol</span>.toStringTag]: { <span class="hljs-attr">value</span>: <span class="hljs-string">'Module'</span> } });

<span class="hljs-keyword">const</span> process$<span class="hljs-number">1</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">'process'</span>);
<span class="hljs-keyword">const</span> rollup = <span class="hljs-built_in">require</span>(<span class="hljs-string">'../shared/rollup.js'</span>);
<span class="hljs-keyword">const</span> <span class="hljs-built_in">require</span>$$<span class="hljs-number">2</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">'util'</span>);
<span class="hljs-keyword">const</span> <span class="hljs-built_in">require</span>$$<span class="hljs-number">0</span>$<span class="hljs-number">1</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);
<span class="hljs-keyword">const</span> <span class="hljs-built_in">require</span>$$<span class="hljs-number">0</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">'path'</span>);
<span class="hljs-keyword">const</span> mergeOptions = <span class="hljs-built_in">require</span>(<span class="hljs-string">'../shared/mergeOptions.js'</span>);
<span class="hljs-keyword">const</span> loadConfigFile_js = <span class="hljs-built_in">require</span>(<span class="hljs-string">'../shared/loadConfigFile.js'</span>);
<span class="hljs-built_in">require</span>(<span class="hljs-string">'perf_hooks'</span>);
<span class="hljs-built_in">require</span>(<span class="hljs-string">'crypto'</span>);
<span class="hljs-built_in">require</span>(<span class="hljs-string">'events'</span>);
<span class="hljs-built_in">require</span>(<span class="hljs-string">'url'</span>);
<span class="hljs-built_in">require</span>(<span class="hljs-string">'tty'</span>);

<span class="hljs-keyword">const</span> help = <span class="hljs-string">"rollup version __VERSION__\n=====================================\n\nUsage: rollup [options] &lt;entry file&gt;\n\nBasic options:\n\n-c, --config &lt;filename&gt;     Use this config file (if argument is used but value\n                              is unspecified, defaults to rollup.config.js)\n-d, --dir &lt;dirname&gt;         Directory for chunks (if absent, prints to stdout)\n-e, --external &lt;ids&gt;        Comma-separate list of module IDs to exclude\n-f, --format &lt;format&gt;       Type of output (amd, cjs, es, iife, umd, system)\n-g, --globals &lt;pairs&gt;       Comma-separate list of `moduleID:Global` pairs\n-h, --help                  Show this help message\n-i, --input &lt;filename&gt;      Input (alternative to &lt;entry file&gt;)\n-m, --sourcemap             Generate sourcemap (`-m inline` for inline map)\n-n, --name &lt;name&gt;           Name for UMD export\n-o, --file &lt;output&gt;         Single output file (if absent, prints to stdout)\n-p, --plugin &lt;plugin&gt;       Use the plugin specified (may be repeated)\n-v, --version               Show version number\n-w, --watch                 Watch files in bundle and rebuild on changes\n--amd.id &lt;id&gt;               ID for AMD module (default is anonymous)\n--amd.autoId                Generate the AMD ID based off the chunk name\n--amd.basePath &lt;prefix&gt;     Path to prepend to auto generated AMD ID\n--amd.define &lt;name&gt;         Function to use in place of `define`\n--amd.forceJsExtensionForImports Use `.js` extension in AMD imports\n--assetFileNames &lt;pattern&gt;  Name pattern for emitted assets\n--banner &lt;text&gt;             Code to insert at top of bundle (outside wrapper)\n--chunkFileNames &lt;pattern&gt;  Name pattern for emitted secondary chunks\n--compact                   Minify wrapper code\n--context &lt;variable&gt;        Specify top-level `this` value\n--entryFileNames &lt;pattern&gt;  Name pattern for emitted entry chunks\n--environment &lt;values&gt;      Settings passed to config file (see example)\n--no-esModule               Do not add __esModule property\n--exports &lt;mode&gt;            Specify export mode (auto, default, named, none)\n--extend                    Extend global variable defined by --name\n--no-externalLiveBindings   Do not generate code to support live bindings\n--failAfterWarnings         Exit with an error if the build produced warnings\n--footer &lt;text&gt;             Code to insert at end of bundle (outside wrapper)\n--no-freeze                 Do not freeze namespace objects\n--no-hoistTransitiveImports Do not hoist transitive imports into entry chunks\n--no-indent                 Don't indent result\n--no-interop                Do not include interop block\n--inlineDynamicImports      Create single bundle when using dynamic imports\n--intro &lt;text&gt;              Code to insert at top of bundle (inside wrapper)\n--minifyInternalExports     Force or disable minification of internal exports\n--namespaceToStringTag      Create proper `.toString` methods for namespaces\n--noConflict                Generate a noConflict method for UMD globals\n--outro &lt;text&gt;              Code to insert at end of bundle (inside wrapper)\n--preferConst               Use `const` instead of `var` for exports\n--no-preserveEntrySignatures Avoid facade chunks for entry points\n--preserveModules           Preserve module structure\n--preserveModulesRoot       Put preserved modules under this path at root level\n--preserveSymlinks          Do not follow symlinks when resolving files\n--no-sanitizeFileName       Do not replace invalid characters in file names\n--shimMissingExports        Create shim variables for missing exports\n--silent                    Don't print warnings\n--sourcemapBaseUrl &lt;url&gt;    Emit absolute sourcemap URLs with given base\n--sourcemapExcludeSources   Do not include source code in source maps\n--sourcemapFile &lt;file&gt;      Specify bundle position for source maps\n--stdin=ext                 Specify file extension used for stdin input\n--no-stdin                  Do not read \"-\" from stdin\n--no-strict                 Don't emit `\"use strict\";` in the generated modules\n--strictDeprecations        Throw errors for deprecated features\n--systemNullSetters         Replace empty SystemJS setters with `null`\n--no-treeshake              Disable tree-shaking optimisations\n--no-treeshake.annotations  Ignore pure call annotations\n--no-treeshake.moduleSideEffects Assume modules have no side-effects\n--no-treeshake.propertyReadSideEffects Ignore property access side-effects\n--no-treeshake.tryCatchDeoptimization Do not turn off try-catch-tree-shaking\n--no-treeshake.unknownGlobalSideEffects Assume unknown globals do not throw\n--waitForBundleInput        Wait for bundle input files\n--watch.buildDelay &lt;number&gt; Throttle watch rebuilds\n--no-watch.clearScreen      Do not clear the screen when rebuilding\n--watch.skipWrite           Do not write files to disk when watching\n--watch.exclude &lt;files&gt;     Exclude files from being watched\n--watch.include &lt;files&gt;     Limit watching to specified files\n--watch.onStart &lt;cmd&gt;       Shell command to run on `\"START\"` event\n--watch.onBundleStart &lt;cmd&gt; Shell command to run on `\"BUNDLE_START\"` event\n--watch.onBundleEnd &lt;cmd&gt;   Shell command to run on `\"BUNDLE_END\"` event\n--watch.onEnd &lt;cmd&gt;         Shell command to run on `\"END\"` event\n--watch.onError &lt;cmd&gt;       Shell command to run on `\"ERROR\"` event\n--validate                  Validate output\n\nExamples:\n\n# use settings in config file\nrollup -c\n\n# in config file, process.env.INCLUDE_DEPS === 'true'\n# and process.env.BUILD === 'production'\nrollup -c --environment INCLUDE_DEPS,BUILD:production\n\n# create CommonJS bundle.js from src/main.js\nrollup --format=cjs --file=bundle.js -- src/main.js\n\n# create self-executing IIFE using `window.jQuery`\n# and `window._` as external globals\nrollup -f iife --globals jquery:jQuery,lodash:_ \\\n  -i src/app.js -o build/app.js -m build/app.js.map\n\nNotes:\n\n* When piping to stdout, only inline sourcemaps are permitted\n\nFor more information visit https://rollupjs.org\n"</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-3" id="section-3"></a>
</div>
<div class="dox">
<div class="summary">
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">camelCase</span>(<span class="hljs-params">str</span>) </span>{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-4" id="section-4"></a>
</div>
<p>Handle the case where an argument is provided as camel case, e.g., fooBar.
by ensuring that the string isn't already mixed case:</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">const</span> isCamelCase = str !== str.toLowerCase() &amp;&amp; str !== str.toUpperCase();
    <span class="hljs-keyword">if</span> (!isCamelCase) {
        str = str.toLowerCase();
    }
    <span class="hljs-keyword">if</span> (str.indexOf(<span class="hljs-string">'-'</span>) === <span class="hljs-number">-1</span> &amp;&amp; str.indexOf(<span class="hljs-string">'_'</span>) === <span class="hljs-number">-1</span>) {
        <span class="hljs-keyword">return</span> str;
    }
    <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">let</span> camelcase = <span class="hljs-string">''</span>;
        <span class="hljs-keyword">let</span> nextChrUpper = <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">const</span> leadingHyphens = str.match(<span class="hljs-regexp">/^-+/</span>);
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = leadingHyphens ? leadingHyphens[<span class="hljs-number">0</span>].length : <span class="hljs-number">0</span>; i &lt; str.length; i++) {
            <span class="hljs-keyword">let</span> chr = str.charAt(i);
            <span class="hljs-keyword">if</span> (nextChrUpper) {
                nextChrUpper = <span class="hljs-literal">false</span>;
                chr = chr.toUpperCase();
            }
            <span class="hljs-keyword">if</span> (i !== <span class="hljs-number">0</span> &amp;&amp; (chr === <span class="hljs-string">'-'</span> || chr === <span class="hljs-string">'_'</span>)) {
                nextChrUpper = <span class="hljs-literal">true</span>;
            }
            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (chr !== <span class="hljs-string">'-'</span> &amp;&amp; chr !== <span class="hljs-string">'_'</span>) {
                camelcase += chr;
            }
        }
        <span class="hljs-keyword">return</span> camelcase;
    }
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">decamelize</span>(<span class="hljs-params">str, joinString</span>) </span>{
    <span class="hljs-keyword">const</span> lowercase = str.toLowerCase();
    joinString = joinString || <span class="hljs-string">'-'</span>;
    <span class="hljs-keyword">let</span> notCamelcase = <span class="hljs-string">''</span>;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; str.length; i++) {
        <span class="hljs-keyword">const</span> chrLower = lowercase.charAt(i);
        <span class="hljs-keyword">const</span> chrString = str.charAt(i);
        <span class="hljs-keyword">if</span> (chrLower !== chrString &amp;&amp; i &gt; <span class="hljs-number">0</span>) {
            notCamelcase += <span class="hljs-string">`<span class="hljs-subst">${joinString}</span><span class="hljs-subst">${lowercase.charAt(i)}</span>`</span>;
        }
        <span class="hljs-keyword">else</span> {
            notCamelcase += chrString;
        }
    }
    <span class="hljs-keyword">return</span> notCamelcase;
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">looksLikeNumber</span>(<span class="hljs-params">x</span>) </span>{
    <span class="hljs-keyword">if</span> (x === <span class="hljs-literal">null</span> || x === <span class="hljs-literal">undefined</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-5" id="section-5"></a>
</div>
<p>if loaded from config, may already be a number.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> x === <span class="hljs-string">'number'</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-6" id="section-6"></a>
</div>
<p>hexadecimal.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">if</span> (<span class="hljs-regexp">/^0x[0-9a-f]+$/i</span>.test(x))
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-7" id="section-7"></a>
</div>
<p>don't treat 0123 as a number; as it drops the leading '0'.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">if</span> (<span class="hljs-regexp">/^0[^.]/</span>.test(x))
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-regexp">/^[-]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/</span>.test(x);
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-8" id="section-8"></a>
</div>
<div class="dox">
<div class="summary">
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>
take an un-split argv string and tokenize it.

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">tokenizeArgString</span>(<span class="hljs-params">argString</span>) </span>{
    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">Array</span>.isArray(argString)) {
        <span class="hljs-keyword">return</span> argString.map(<span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> <span class="hljs-keyword">typeof</span> e !== <span class="hljs-string">'string'</span> ? e + <span class="hljs-string">''</span> : e);
    }
    argString = argString.trim();
    <span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">let</span> prevC = <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">let</span> c = <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">let</span> opening = <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">const</span> args = [];
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> ii = <span class="hljs-number">0</span>; ii &lt; argString.length; ii++) {
        prevC = c;
        c = argString.charAt(ii);
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-9" id="section-9"></a>
</div>
<p>split on spaces unless we're in quotes.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">if</span> (c === <span class="hljs-string">' '</span> &amp;&amp; !opening) {
            <span class="hljs-keyword">if</span> (!(prevC === <span class="hljs-string">' '</span>)) {
                i++;
            }
            <span class="hljs-keyword">continue</span>;
        }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-10" id="section-10"></a>
</div>
<p>don't split the string if we're in matching
opening or closing single and double quotes.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">if</span> (c === opening) {
            opening = <span class="hljs-literal">null</span>;
        }
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ((c === <span class="hljs-string">"'"</span> || c === <span class="hljs-string">'"'</span>) &amp;&amp; !opening) {
            opening = c;
        }
        <span class="hljs-keyword">if</span> (!args[i])
            args[i] = <span class="hljs-string">''</span>;
        args[i] += c;
    }
    <span class="hljs-keyword">return</span> args;
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-11" id="section-11"></a>
</div>
<div class="dox">
<div class="summary">
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-keyword">var</span> DefaultValuesForTypeKey;
(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">DefaultValuesForTypeKey</span>) </span>{
    DefaultValuesForTypeKey[<span class="hljs-string">"BOOLEAN"</span>] = <span class="hljs-string">"boolean"</span>;
    DefaultValuesForTypeKey[<span class="hljs-string">"STRING"</span>] = <span class="hljs-string">"string"</span>;
    DefaultValuesForTypeKey[<span class="hljs-string">"NUMBER"</span>] = <span class="hljs-string">"number"</span>;
    DefaultValuesForTypeKey[<span class="hljs-string">"ARRAY"</span>] = <span class="hljs-string">"array"</span>;
})(DefaultValuesForTypeKey || (DefaultValuesForTypeKey = {}));

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-12" id="section-12"></a>
</div>
<div class="dox">
<div class="summary">
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-keyword">let</span> mixin;
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">YargsParser</span> </span>{
    <span class="hljs-keyword">constructor</span>(_mixin) {
        mixin = _mixin;
    }
    parse(argsInput, options) {
        <span class="hljs-keyword">const</span> opts = <span class="hljs-built_in">Object</span>.assign({
            <span class="hljs-attr">alias</span>: <span class="hljs-literal">undefined</span>,
            <span class="hljs-attr">array</span>: <span class="hljs-literal">undefined</span>,
            <span class="hljs-attr">boolean</span>: <span class="hljs-literal">undefined</span>,
            <span class="hljs-attr">config</span>: <span class="hljs-literal">undefined</span>,
            <span class="hljs-attr">configObjects</span>: <span class="hljs-literal">undefined</span>,
            <span class="hljs-attr">configuration</span>: <span class="hljs-literal">undefined</span>,
            <span class="hljs-attr">coerce</span>: <span class="hljs-literal">undefined</span>,
            <span class="hljs-attr">count</span>: <span class="hljs-literal">undefined</span>,
            <span class="hljs-attr">default</span>: <span class="hljs-literal">undefined</span>,
            <span class="hljs-attr">envPrefix</span>: <span class="hljs-literal">undefined</span>,
            <span class="hljs-attr">narg</span>: <span class="hljs-literal">undefined</span>,
            <span class="hljs-attr">normalize</span>: <span class="hljs-literal">undefined</span>,
            <span class="hljs-attr">string</span>: <span class="hljs-literal">undefined</span>,
            <span class="hljs-attr">number</span>: <span class="hljs-literal">undefined</span>,
            <span class="hljs-attr">__</span>: <span class="hljs-literal">undefined</span>,
            <span class="hljs-attr">key</span>: <span class="hljs-literal">undefined</span>
        }, options);
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-13" id="section-13"></a>
</div>
<p>allow a string argument to be passed in rather
than an argv array.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">const</span> args = tokenizeArgString(argsInput);
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-14" id="section-14"></a>
</div>
<p>aliases might have transitive relationships, normalize this.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">const</span> aliases = combineAliases(<span class="hljs-built_in">Object</span>.assign(<span class="hljs-built_in">Object</span>.create(<span class="hljs-literal">null</span>), opts.alias));
        <span class="hljs-keyword">const</span> configuration = <span class="hljs-built_in">Object</span>.assign({
            <span class="hljs-string">'boolean-negation'</span>: <span class="hljs-literal">true</span>,
            <span class="hljs-string">'camel-case-expansion'</span>: <span class="hljs-literal">true</span>,
            <span class="hljs-string">'combine-arrays'</span>: <span class="hljs-literal">false</span>,
            <span class="hljs-string">'dot-notation'</span>: <span class="hljs-literal">true</span>,
            <span class="hljs-string">'duplicate-arguments-array'</span>: <span class="hljs-literal">true</span>,
            <span class="hljs-string">'flatten-duplicate-arrays'</span>: <span class="hljs-literal">true</span>,
            <span class="hljs-string">'greedy-arrays'</span>: <span class="hljs-literal">true</span>,
            <span class="hljs-string">'halt-at-non-option'</span>: <span class="hljs-literal">false</span>,
            <span class="hljs-string">'nargs-eats-options'</span>: <span class="hljs-literal">false</span>,
            <span class="hljs-string">'negation-prefix'</span>: <span class="hljs-string">'no-'</span>,
            <span class="hljs-string">'parse-numbers'</span>: <span class="hljs-literal">true</span>,
            <span class="hljs-string">'parse-positional-numbers'</span>: <span class="hljs-literal">true</span>,
            <span class="hljs-string">'populate--'</span>: <span class="hljs-literal">false</span>,
            <span class="hljs-string">'set-placeholder-key'</span>: <span class="hljs-literal">false</span>,
            <span class="hljs-string">'short-option-groups'</span>: <span class="hljs-literal">true</span>,
            <span class="hljs-string">'strip-aliased'</span>: <span class="hljs-literal">false</span>,
            <span class="hljs-string">'strip-dashed'</span>: <span class="hljs-literal">false</span>,
            <span class="hljs-string">'unknown-options-as-args'</span>: <span class="hljs-literal">false</span>
        }, opts.configuration);
        <span class="hljs-keyword">const</span> defaults = <span class="hljs-built_in">Object</span>.assign(<span class="hljs-built_in">Object</span>.create(<span class="hljs-literal">null</span>), opts.default);
        <span class="hljs-keyword">const</span> configObjects = opts.configObjects || [];
        <span class="hljs-keyword">const</span> envPrefix = opts.envPrefix;
        <span class="hljs-keyword">const</span> notFlagsOption = configuration[<span class="hljs-string">'populate--'</span>];
        <span class="hljs-keyword">const</span> notFlagsArgv = notFlagsOption ? <span class="hljs-string">'--'</span> : <span class="hljs-string">'_'</span>;
        <span class="hljs-keyword">const</span> newAliases = <span class="hljs-built_in">Object</span>.create(<span class="hljs-literal">null</span>);
        <span class="hljs-keyword">const</span> defaulted = <span class="hljs-built_in">Object</span>.create(<span class="hljs-literal">null</span>);
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-15" id="section-15"></a>
</div>
<p>allow a i18n handler to be passed in, default to a fake one (util.format).</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">const</span> __ = opts.__ || mixin.format;
        <span class="hljs-keyword">const</span> flags = {
            <span class="hljs-attr">aliases</span>: <span class="hljs-built_in">Object</span>.create(<span class="hljs-literal">null</span>),
            <span class="hljs-attr">arrays</span>: <span class="hljs-built_in">Object</span>.create(<span class="hljs-literal">null</span>),
            <span class="hljs-attr">bools</span>: <span class="hljs-built_in">Object</span>.create(<span class="hljs-literal">null</span>),
            <span class="hljs-attr">strings</span>: <span class="hljs-built_in">Object</span>.create(<span class="hljs-literal">null</span>),
            <span class="hljs-attr">numbers</span>: <span class="hljs-built_in">Object</span>.create(<span class="hljs-literal">null</span>),
            <span class="hljs-attr">counts</span>: <span class="hljs-built_in">Object</span>.create(<span class="hljs-literal">null</span>),
            <span class="hljs-attr">normalize</span>: <span class="hljs-built_in">Object</span>.create(<span class="hljs-literal">null</span>),
            <span class="hljs-attr">configs</span>: <span class="hljs-built_in">Object</span>.create(<span class="hljs-literal">null</span>),
            <span class="hljs-attr">nargs</span>: <span class="hljs-built_in">Object</span>.create(<span class="hljs-literal">null</span>),
            <span class="hljs-attr">coercions</span>: <span class="hljs-built_in">Object</span>.create(<span class="hljs-literal">null</span>),
            <span class="hljs-attr">keys</span>: []
        };
        <span class="hljs-keyword">const</span> negative = <span class="hljs-regexp">/^-([0-9]+(\.[0-9]+)?|\.[0-9]+)$/</span>;
        <span class="hljs-keyword">const</span> negatedBoolean = <span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(<span class="hljs-string">'^--'</span> + configuration[<span class="hljs-string">'negation-prefix'</span>] + <span class="hljs-string">'(.+)'</span>);
        [].concat(opts.array || []).filter(<span class="hljs-built_in">Boolean</span>).forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">opt</span>) </span>{
            <span class="hljs-keyword">const</span> key = <span class="hljs-keyword">typeof</span> opt === <span class="hljs-string">'object'</span> ? opt.key : opt;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-16" id="section-16"></a>
</div>
<p>assign to flags[bools|strings|numbers]</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">            <span class="hljs-keyword">const</span> assignment = <span class="hljs-built_in">Object</span>.keys(opt).map(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">key</span>) </span>{
                <span class="hljs-keyword">const</span> arrayFlagKeys = {
                    <span class="hljs-attr">boolean</span>: <span class="hljs-string">'bools'</span>,
                    <span class="hljs-attr">string</span>: <span class="hljs-string">'strings'</span>,
                    <span class="hljs-attr">number</span>: <span class="hljs-string">'numbers'</span>
                };
                <span class="hljs-keyword">return</span> arrayFlagKeys[key];
            }).filter(<span class="hljs-built_in">Boolean</span>).pop();
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-17" id="section-17"></a>
</div>
<p>assign key to be coerced</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">            <span class="hljs-keyword">if</span> (assignment) {
                flags[assignment][key] = <span class="hljs-literal">true</span>;
            }
            flags.arrays[key] = <span class="hljs-literal">true</span>;
            flags.keys.push(key);
        });
        [].concat(opts.boolean || []).filter(<span class="hljs-built_in">Boolean</span>).forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">key</span>) </span>{
            flags.bools[key] = <span class="hljs-literal">true</span>;
            flags.keys.push(key);
        });
        [].concat(opts.string || []).filter(<span class="hljs-built_in">Boolean</span>).forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">key</span>) </span>{
            flags.strings[key] = <span class="hljs-literal">true</span>;
            flags.keys.push(key);
        });
        [].concat(opts.number || []).filter(<span class="hljs-built_in">Boolean</span>).forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">key</span>) </span>{
            flags.numbers[key] = <span class="hljs-literal">true</span>;
            flags.keys.push(key);
        });
        [].concat(opts.count || []).filter(<span class="hljs-built_in">Boolean</span>).forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">key</span>) </span>{
            flags.counts[key] = <span class="hljs-literal">true</span>;
            flags.keys.push(key);
        });
        [].concat(opts.normalize || []).filter(<span class="hljs-built_in">Boolean</span>).forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">key</span>) </span>{
            flags.normalize[key] = <span class="hljs-literal">true</span>;
            flags.keys.push(key);
        });
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> opts.narg === <span class="hljs-string">'object'</span>) {
            <span class="hljs-built_in">Object</span>.entries(opts.narg).forEach(<span class="hljs-function">(<span class="hljs-params">[key, value]</span>) =&gt;</span> {
                <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> value === <span class="hljs-string">'number'</span>) {
                    flags.nargs[key] = value;
                    flags.keys.push(key);
                }
            });
        }
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> opts.coerce === <span class="hljs-string">'object'</span>) {
            <span class="hljs-built_in">Object</span>.entries(opts.coerce).forEach(<span class="hljs-function">(<span class="hljs-params">[key, value]</span>) =&gt;</span> {
                <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> value === <span class="hljs-string">'function'</span>) {
                    flags.coercions[key] = value;
                    flags.keys.push(key);
                }
            });
        }
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> opts.config !== <span class="hljs-string">'undefined'</span>) {
            <span class="hljs-keyword">if</span> (<span class="hljs-built_in">Array</span>.isArray(opts.config) || <span class="hljs-keyword">typeof</span> opts.config === <span class="hljs-string">'string'</span>) {
                [].concat(opts.config).filter(<span class="hljs-built_in">Boolean</span>).forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">key</span>) </span>{
                    flags.configs[key] = <span class="hljs-literal">true</span>;
                });
            }
            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> opts.config === <span class="hljs-string">'object'</span>) {
                <span class="hljs-built_in">Object</span>.entries(opts.config).forEach(<span class="hljs-function">(<span class="hljs-params">[key, value]</span>) =&gt;</span> {
                    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> value === <span class="hljs-string">'boolean'</span> || <span class="hljs-keyword">typeof</span> value === <span class="hljs-string">'function'</span>) {
                        flags.configs[key] = value;
                    }
                });
            }
        }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-18" id="section-18"></a>
</div>
<p>create a lookup table that takes into account all
combinations of aliases: {f: ['foo'], foo: ['f']}</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        extendAliases(opts.key, aliases, opts.default, flags.arrays);
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-19" id="section-19"></a>
</div>
<p>apply default values to all aliases.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-built_in">Object</span>.keys(defaults).forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">key</span>) </span>{
            (flags.aliases[key] || []).forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">alias</span>) </span>{
                defaults[alias] = defaults[key];
            });
        });
        <span class="hljs-keyword">let</span> error = <span class="hljs-literal">null</span>;
        checkConfiguration();
        <span class="hljs-keyword">let</span> notFlags = [];
        <span class="hljs-keyword">const</span> argv = <span class="hljs-built_in">Object</span>.assign(<span class="hljs-built_in">Object</span>.create(<span class="hljs-literal">null</span>), { <span class="hljs-attr">_</span>: [] });
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-20" id="section-20"></a>
</div>
<p>TODO(bcoe): for the first pass at removing object prototype  we didn't
remove all prototypes from objects returned by this API, we might want
to gradually move towards doing so.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">const</span> argvReturn = {};
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; args.length; i++) {
            <span class="hljs-keyword">const</span> arg = args[i];
            <span class="hljs-keyword">const</span> truncatedArg = arg.replace(<span class="hljs-regexp">/^-{3,}/</span>, <span class="hljs-string">'---'</span>);
            <span class="hljs-keyword">let</span> broken;
            <span class="hljs-keyword">let</span> key;
            <span class="hljs-keyword">let</span> letters;
            <span class="hljs-keyword">let</span> m;
            <span class="hljs-keyword">let</span> next;
            <span class="hljs-keyword">let</span> value;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-21" id="section-21"></a>
</div>
<p>any unknown option (except for end-of-options, &quot;--&quot;)</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">            <span class="hljs-keyword">if</span> (arg !== <span class="hljs-string">'--'</span> &amp;&amp; isUnknownOptionAsArg(arg)) {
                pushPositional(arg);
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-22" id="section-22"></a>
</div>
<p>---, ---=, ----, etc,</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">            }
            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (truncatedArg.match(<span class="hljs-regexp">/---+(=|$)/</span>)) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-23" id="section-23"></a>
</div>
<p>options without key name are invalid.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">                pushPositional(arg);
                <span class="hljs-keyword">continue</span>;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-24" id="section-24"></a>
</div>
<p>-- separated by =</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">            }
            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (arg.match(<span class="hljs-regexp">/^--.+=/</span>) || (!configuration[<span class="hljs-string">'short-option-groups'</span>] &amp;&amp; arg.match(<span class="hljs-regexp">/^-.+=/</span>))) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-25" id="section-25"></a>
</div>
<p>Using [\s\S] instead of . because js doesn't support the
'dotall' regex modifier. See:
http://stackoverflow.com/a/1068308/13216</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">                m = arg.match(<span class="hljs-regexp">/^--?([^=]+)=([\s\S]*)$/</span>);
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-26" id="section-26"></a>
</div>
<p>arrays format = '--f=a b c'</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">                <span class="hljs-keyword">if</span> (m !== <span class="hljs-literal">null</span> &amp;&amp; <span class="hljs-built_in">Array</span>.isArray(m) &amp;&amp; m.length &gt;= <span class="hljs-number">3</span>) {
                    <span class="hljs-keyword">if</span> (checkAllAliases(m[<span class="hljs-number">1</span>], flags.arrays)) {
                        i = eatArray(i, m[<span class="hljs-number">1</span>], args, m[<span class="hljs-number">2</span>]);
                    }
                    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (checkAllAliases(m[<span class="hljs-number">1</span>], flags.nargs) !== <span class="hljs-literal">false</span>) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-27" id="section-27"></a>
</div>
<p>nargs format = '--f=monkey washing cat'</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">                        i = eatNargs(i, m[<span class="hljs-number">1</span>], args, m[<span class="hljs-number">2</span>]);
                    }
                    <span class="hljs-keyword">else</span> {
                        setArg(m[<span class="hljs-number">1</span>], m[<span class="hljs-number">2</span>]);
                    }
                }
            }
            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (arg.match(negatedBoolean) &amp;&amp; configuration[<span class="hljs-string">'boolean-negation'</span>]) {
                m = arg.match(negatedBoolean);
                <span class="hljs-keyword">if</span> (m !== <span class="hljs-literal">null</span> &amp;&amp; <span class="hljs-built_in">Array</span>.isArray(m) &amp;&amp; m.length &gt;= <span class="hljs-number">2</span>) {
                    key = m[<span class="hljs-number">1</span>];
                    setArg(key, checkAllAliases(key, flags.arrays) ? [<span class="hljs-literal">false</span>] : <span class="hljs-literal">false</span>);
                }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-28" id="section-28"></a>
</div>
<p>-- separated by space.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">            }
            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (arg.match(<span class="hljs-regexp">/^--.+/</span>) || (!configuration[<span class="hljs-string">'short-option-groups'</span>] &amp;&amp; arg.match(<span class="hljs-regexp">/^-[^-]+/</span>))) {
                m = arg.match(<span class="hljs-regexp">/^--?(.+)/</span>);
                <span class="hljs-keyword">if</span> (m !== <span class="hljs-literal">null</span> &amp;&amp; <span class="hljs-built_in">Array</span>.isArray(m) &amp;&amp; m.length &gt;= <span class="hljs-number">2</span>) {
                    key = m[<span class="hljs-number">1</span>];
                    <span class="hljs-keyword">if</span> (checkAllAliases(key, flags.arrays)) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-29" id="section-29"></a>
</div>
<p>array format = '--foo a b c'</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">                        i = eatArray(i, key, args);
                    }
                    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (checkAllAliases(key, flags.nargs) !== <span class="hljs-literal">false</span>) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-30" id="section-30"></a>
</div>
<p>nargs format = '--foo a b c'
should be truthy even if: flags.nargs[key] === 0</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">                        i = eatNargs(i, key, args);
                    }
                    <span class="hljs-keyword">else</span> {
                        next = args[i + <span class="hljs-number">1</span>];
                        <span class="hljs-keyword">if</span> (next !== <span class="hljs-literal">undefined</span> &amp;&amp; (!next.match(<span class="hljs-regexp">/^-/</span>) ||
                            next.match(negative)) &amp;&amp;
                            !checkAllAliases(key, flags.bools) &amp;&amp;
                            !checkAllAliases(key, flags.counts)) {
                            setArg(key, next);
                            i++;
                        }
                        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-regexp">/^(true|false)$/</span>.test(next)) {
                            setArg(key, next);
                            i++;
                        }
                        <span class="hljs-keyword">else</span> {
                            setArg(key, defaultValue(key));
                        }
                    }
                }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-31" id="section-31"></a>
</div>
<p>dot-notation flag separated by '='.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">            }
            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (arg.match(<span class="hljs-regexp">/^-.\..+=/</span>)) {
                m = arg.match(<span class="hljs-regexp">/^-([^=]+)=([\s\S]*)$/</span>);
                <span class="hljs-keyword">if</span> (m !== <span class="hljs-literal">null</span> &amp;&amp; <span class="hljs-built_in">Array</span>.isArray(m) &amp;&amp; m.length &gt;= <span class="hljs-number">3</span>) {
                    setArg(m[<span class="hljs-number">1</span>], m[<span class="hljs-number">2</span>]);
                }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-32" id="section-32"></a>
</div>
<p>dot-notation flag separated by space.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">            }
            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (arg.match(<span class="hljs-regexp">/^-.\..+/</span>) &amp;&amp; !arg.match(negative)) {
                next = args[i + <span class="hljs-number">1</span>];
                m = arg.match(<span class="hljs-regexp">/^-(.\..+)/</span>);
                <span class="hljs-keyword">if</span> (m !== <span class="hljs-literal">null</span> &amp;&amp; <span class="hljs-built_in">Array</span>.isArray(m) &amp;&amp; m.length &gt;= <span class="hljs-number">2</span>) {
                    key = m[<span class="hljs-number">1</span>];
                    <span class="hljs-keyword">if</span> (next !== <span class="hljs-literal">undefined</span> &amp;&amp; !next.match(<span class="hljs-regexp">/^-/</span>) &amp;&amp;
                        !checkAllAliases(key, flags.bools) &amp;&amp;
                        !checkAllAliases(key, flags.counts)) {
                        setArg(key, next);
                        i++;
                    }
                    <span class="hljs-keyword">else</span> {
                        setArg(key, defaultValue(key));
                    }
                }
            }
            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (arg.match(<span class="hljs-regexp">/^-[^-]+/</span>) &amp;&amp; !arg.match(negative)) {
                letters = arg.slice(<span class="hljs-number">1</span>, <span class="hljs-number">-1</span>).split(<span class="hljs-string">''</span>);
                broken = <span class="hljs-literal">false</span>;
                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> j = <span class="hljs-number">0</span>; j &lt; letters.length; j++) {
                    next = arg.slice(j + <span class="hljs-number">2</span>);
                    <span class="hljs-keyword">if</span> (letters[j + <span class="hljs-number">1</span>] &amp;&amp; letters[j + <span class="hljs-number">1</span>] === <span class="hljs-string">'='</span>) {
                        value = arg.slice(j + <span class="hljs-number">3</span>);
                        key = letters[j];
                        <span class="hljs-keyword">if</span> (checkAllAliases(key, flags.arrays)) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-33" id="section-33"></a>
</div>
<p>array format = '-f=a b c'</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">                            i = eatArray(i, key, args, value);
                        }
                        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (checkAllAliases(key, flags.nargs) !== <span class="hljs-literal">false</span>) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-34" id="section-34"></a>
</div>
<p>nargs format = '-f=monkey washing cat'</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">                            i = eatNargs(i, key, args, value);
                        }
                        <span class="hljs-keyword">else</span> {
                            setArg(key, value);
                        }
                        broken = <span class="hljs-literal">true</span>;
                        <span class="hljs-keyword">break</span>;
                    }
                    <span class="hljs-keyword">if</span> (next === <span class="hljs-string">'-'</span>) {
                        setArg(letters[j], next);
                        <span class="hljs-keyword">continue</span>;
                    }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-35" id="section-35"></a>
</div>
<p>current letter is an alphabetic character and next value is a number</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">                    <span class="hljs-keyword">if</span> (<span class="hljs-regexp">/[A-Za-z]/</span>.test(letters[j]) &amp;&amp;
                        <span class="hljs-regexp">/^-?\d+(\.\d*)?(e-?\d+)?$/</span>.test(next) &amp;&amp;
                        checkAllAliases(next, flags.bools) === <span class="hljs-literal">false</span>) {
                        setArg(letters[j], next);
                        broken = <span class="hljs-literal">true</span>;
                        <span class="hljs-keyword">break</span>;
                    }
                    <span class="hljs-keyword">if</span> (letters[j + <span class="hljs-number">1</span>] &amp;&amp; letters[j + <span class="hljs-number">1</span>].match(<span class="hljs-regexp">/\W/</span>)) {
                        setArg(letters[j], next);
                        broken = <span class="hljs-literal">true</span>;
                        <span class="hljs-keyword">break</span>;
                    }
                    <span class="hljs-keyword">else</span> {
                        setArg(letters[j], defaultValue(letters[j]));
                    }
                }
                key = arg.slice(<span class="hljs-number">-1</span>)[<span class="hljs-number">0</span>];
                <span class="hljs-keyword">if</span> (!broken &amp;&amp; key !== <span class="hljs-string">'-'</span>) {
                    <span class="hljs-keyword">if</span> (checkAllAliases(key, flags.arrays)) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-36" id="section-36"></a>
</div>
<p>array format = '-f a b c'</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">                        i = eatArray(i, key, args);
                    }
                    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (checkAllAliases(key, flags.nargs) !== <span class="hljs-literal">false</span>) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-37" id="section-37"></a>
</div>
<p>nargs format = '-f a b c'
should be truthy even if: flags.nargs[key] === 0</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">                        i = eatNargs(i, key, args);
                    }
                    <span class="hljs-keyword">else</span> {
                        next = args[i + <span class="hljs-number">1</span>];
                        <span class="hljs-keyword">if</span> (next !== <span class="hljs-literal">undefined</span> &amp;&amp; (!<span class="hljs-regexp">/^(-|--)[^-]/</span>.test(next) ||
                            next.match(negative)) &amp;&amp;
                            !checkAllAliases(key, flags.bools) &amp;&amp;
                            !checkAllAliases(key, flags.counts)) {
                            setArg(key, next);
                            i++;
                        }
                        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-regexp">/^(true|false)$/</span>.test(next)) {
                            setArg(key, next);
                            i++;
                        }
                        <span class="hljs-keyword">else</span> {
                            setArg(key, defaultValue(key));
                        }
                    }
                }
            }
            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (arg.match(<span class="hljs-regexp">/^-[0-9]$/</span>) &amp;&amp;
                arg.match(negative) &amp;&amp;
                checkAllAliases(arg.slice(<span class="hljs-number">1</span>), flags.bools)) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-38" id="section-38"></a>
</div>
<p>single-digit boolean alias, e.g: xargs -0</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">                key = arg.slice(<span class="hljs-number">1</span>);
                setArg(key, defaultValue(key));
            }
            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (arg === <span class="hljs-string">'--'</span>) {
                notFlags = args.slice(i + <span class="hljs-number">1</span>);
                <span class="hljs-keyword">break</span>;
            }
            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (configuration[<span class="hljs-string">'halt-at-non-option'</span>]) {
                notFlags = args.slice(i);
                <span class="hljs-keyword">break</span>;
            }
            <span class="hljs-keyword">else</span> {
                pushPositional(arg);
            }
        }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-39" id="section-39"></a>
</div>
<p>order of precedence:</p>
<ol>
<li>command line arg</li>
<li>value from env var</li>
<li>value from config file</li>
<li>value from config objects</li>
<li>configured default value</li>
</ol>

        </td>
        <td class="code highlight">
          <pre class="javascript">        applyEnvVars(argv, <span class="hljs-literal">true</span>); <span class="hljs-comment">// special case: check env vars that point to config file</span>
        applyEnvVars(argv, <span class="hljs-literal">false</span>);
        setConfig(argv);
        setConfigObjects();
        applyDefaultsAndAliases(argv, flags.aliases, defaults, <span class="hljs-literal">true</span>);
        applyCoercions(argv);
        <span class="hljs-keyword">if</span> (configuration[<span class="hljs-string">'set-placeholder-key'</span>])
            setPlaceholderKeys(argv);
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-40" id="section-40"></a>
</div>
<p>for any counts either not in args or without an explicit default, set to 0</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-built_in">Object</span>.keys(flags.counts).forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">key</span>) </span>{
            <span class="hljs-keyword">if</span> (!hasKey(argv, key.split(<span class="hljs-string">'.'</span>)))
                setArg(key, <span class="hljs-number">0</span>);
        });
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-41" id="section-41"></a>
</div>
<p>'--' defaults to undefined.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">if</span> (notFlagsOption &amp;&amp; notFlags.length)
            argv[notFlagsArgv] = [];
        notFlags.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">key</span>) </span>{
            argv[notFlagsArgv].push(key);
        });
        <span class="hljs-keyword">if</span> (configuration[<span class="hljs-string">'camel-case-expansion'</span>] &amp;&amp; configuration[<span class="hljs-string">'strip-dashed'</span>]) {
            <span class="hljs-built_in">Object</span>.keys(argv).filter(<span class="hljs-function"><span class="hljs-params">key</span> =&gt;</span> key !== <span class="hljs-string">'--'</span> &amp;&amp; key.includes(<span class="hljs-string">'-'</span>)).forEach(<span class="hljs-function"><span class="hljs-params">key</span> =&gt;</span> {
                <span class="hljs-keyword">delete</span> argv[key];
            });
        }
        <span class="hljs-keyword">if</span> (configuration[<span class="hljs-string">'strip-aliased'</span>]) {
            [].concat(...Object.keys(aliases).map(<span class="hljs-function"><span class="hljs-params">k</span> =&gt;</span> aliases[k])).forEach(<span class="hljs-function"><span class="hljs-params">alias</span> =&gt;</span> {
                <span class="hljs-keyword">if</span> (configuration[<span class="hljs-string">'camel-case-expansion'</span>] &amp;&amp; alias.includes(<span class="hljs-string">'-'</span>)) {
                    <span class="hljs-keyword">delete</span> argv[alias.split(<span class="hljs-string">'.'</span>).map(<span class="hljs-function"><span class="hljs-params">prop</span> =&gt;</span> camelCase(prop)).join(<span class="hljs-string">'.'</span>)];
                }
                <span class="hljs-keyword">delete</span> argv[alias];
            });
        }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-42" id="section-42"></a>
</div>
<p>Push argument into positional array, applying numeric coercion:</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">pushPositional</span>(<span class="hljs-params">arg</span>) </span>{
            <span class="hljs-keyword">const</span> maybeCoercedNumber = maybeCoerceNumber(<span class="hljs-string">'_'</span>, arg);
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> maybeCoercedNumber === <span class="hljs-string">'string'</span> || <span class="hljs-keyword">typeof</span> maybeCoercedNumber === <span class="hljs-string">'number'</span>) {
                argv._.push(maybeCoercedNumber);
            }
        }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-43" id="section-43"></a>
</div>
<p>how many arguments should we consume, based
on the nargs option?</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">eatNargs</span>(<span class="hljs-params">i, key, args, argAfterEqualSign</span>) </span>{
            <span class="hljs-keyword">let</span> ii;
            <span class="hljs-keyword">let</span> toEat = checkAllAliases(key, flags.nargs);
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-44" id="section-44"></a>
</div>
<p>NaN has a special meaning for the array type, indicating that one or
more values are expected.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">            toEat = <span class="hljs-keyword">typeof</span> toEat !== <span class="hljs-string">'number'</span> || <span class="hljs-built_in">isNaN</span>(toEat) ? <span class="hljs-number">1</span> : toEat;
            <span class="hljs-keyword">if</span> (toEat === <span class="hljs-number">0</span>) {
                <span class="hljs-keyword">if</span> (!isUndefined(argAfterEqualSign)) {
                    error = <span class="hljs-built_in">Error</span>(__(<span class="hljs-string">'Argument unexpected for: %s'</span>, key));
                }
                setArg(key, defaultValue(key));
                <span class="hljs-keyword">return</span> i;
            }
            <span class="hljs-keyword">let</span> available = isUndefined(argAfterEqualSign) ? <span class="hljs-number">0</span> : <span class="hljs-number">1</span>;
            <span class="hljs-keyword">if</span> (configuration[<span class="hljs-string">'nargs-eats-options'</span>]) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-45" id="section-45"></a>
</div>
<p>classic behavior, yargs eats positional and dash arguments.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">                <span class="hljs-keyword">if</span> (args.length - (i + <span class="hljs-number">1</span>) + available &lt; toEat) {
                    error = <span class="hljs-built_in">Error</span>(__(<span class="hljs-string">'Not enough arguments following: %s'</span>, key));
                }
                available = toEat;
            }
            <span class="hljs-keyword">else</span> {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-46" id="section-46"></a>
</div>
<p>nargs will not consume flag arguments, e.g., -abc, --foo,
and terminates when one is observed.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">                <span class="hljs-keyword">for</span> (ii = i + <span class="hljs-number">1</span>; ii &lt; args.length; ii++) {
                    <span class="hljs-keyword">if</span> (!args[ii].match(<span class="hljs-regexp">/^-[^0-9]/</span>) || args[ii].match(negative) || isUnknownOptionAsArg(args[ii]))
                        available++;
                    <span class="hljs-keyword">else</span>
                        <span class="hljs-keyword">break</span>;
                }
                <span class="hljs-keyword">if</span> (available &lt; toEat)
                    error = <span class="hljs-built_in">Error</span>(__(<span class="hljs-string">'Not enough arguments following: %s'</span>, key));
            }
            <span class="hljs-keyword">let</span> consumed = <span class="hljs-built_in">Math</span>.min(available, toEat);
            <span class="hljs-keyword">if</span> (!isUndefined(argAfterEqualSign) &amp;&amp; consumed &gt; <span class="hljs-number">0</span>) {
                setArg(key, argAfterEqualSign);
                consumed--;
            }
            <span class="hljs-keyword">for</span> (ii = i + <span class="hljs-number">1</span>; ii &lt; (consumed + i + <span class="hljs-number">1</span>); ii++) {
                setArg(key, args[ii]);
            }
            <span class="hljs-keyword">return</span> (i + consumed);
        }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-47" id="section-47"></a>
</div>
<p>if an option is an array, eat all non-hyphenated arguments
following it... YUM!
e.g., --foo apple banana cat becomes [&quot;apple&quot;, &quot;banana&quot;, &quot;cat&quot;]</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">eatArray</span>(<span class="hljs-params">i, key, args, argAfterEqualSign</span>) </span>{
            <span class="hljs-keyword">let</span> argsToSet = [];
            <span class="hljs-keyword">let</span> next = argAfterEqualSign || args[i + <span class="hljs-number">1</span>];
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-48" id="section-48"></a>
</div>
<p>If both array and nargs are configured, enforce the nargs count:</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">            <span class="hljs-keyword">const</span> nargsCount = checkAllAliases(key, flags.nargs);
            <span class="hljs-keyword">if</span> (checkAllAliases(key, flags.bools) &amp;&amp; !(<span class="hljs-regexp">/^(true|false)$/</span>.test(next))) {
                argsToSet.push(<span class="hljs-literal">true</span>);
            }
            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isUndefined(next) ||
                (isUndefined(argAfterEqualSign) &amp;&amp; <span class="hljs-regexp">/^-/</span>.test(next) &amp;&amp; !negative.test(next) &amp;&amp; !isUnknownOptionAsArg(next))) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-49" id="section-49"></a>
</div>
<p>for keys without value ==&gt; argsToSet remains an empty []
set user default value, if available</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">                <span class="hljs-keyword">if</span> (defaults[key] !== <span class="hljs-literal">undefined</span>) {
                    <span class="hljs-keyword">const</span> defVal = defaults[key];
                    argsToSet = <span class="hljs-built_in">Array</span>.isArray(defVal) ? defVal : [defVal];
                }
            }
            <span class="hljs-keyword">else</span> {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-50" id="section-50"></a>
</div>
<p>value in --option=value is eaten as is</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">                <span class="hljs-keyword">if</span> (!isUndefined(argAfterEqualSign)) {
                    argsToSet.push(processValue(key, argAfterEqualSign));
                }
                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> ii = i + <span class="hljs-number">1</span>; ii &lt; args.length; ii++) {
                    <span class="hljs-keyword">if</span> ((!configuration[<span class="hljs-string">'greedy-arrays'</span>] &amp;&amp; argsToSet.length &gt; <span class="hljs-number">0</span>) ||
                        (nargsCount &amp;&amp; <span class="hljs-keyword">typeof</span> nargsCount === <span class="hljs-string">'number'</span> &amp;&amp; argsToSet.length &gt;= nargsCount))
                        <span class="hljs-keyword">break</span>;
                    next = args[ii];
                    <span class="hljs-keyword">if</span> (<span class="hljs-regexp">/^-/</span>.test(next) &amp;&amp; !negative.test(next) &amp;&amp; !isUnknownOptionAsArg(next))
                        <span class="hljs-keyword">break</span>;
                    i = ii;
                    argsToSet.push(processValue(key, next));
                }
            }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-51" id="section-51"></a>
</div>
<p>If both array and nargs are configured, create an error if less than
nargs positionals were found. NaN has special meaning, indicating
that at least one value is required (more are okay).</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> nargsCount === <span class="hljs-string">'number'</span> &amp;&amp; ((nargsCount &amp;&amp; argsToSet.length &lt; nargsCount) ||
                (<span class="hljs-built_in">isNaN</span>(nargsCount) &amp;&amp; argsToSet.length === <span class="hljs-number">0</span>))) {
                error = <span class="hljs-built_in">Error</span>(__(<span class="hljs-string">'Not enough arguments following: %s'</span>, key));
            }
            setArg(key, argsToSet);
            <span class="hljs-keyword">return</span> i;
        }
        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setArg</span>(<span class="hljs-params">key, val</span>) </span>{
            <span class="hljs-keyword">if</span> (<span class="hljs-regexp">/-/</span>.test(key) &amp;&amp; configuration[<span class="hljs-string">'camel-case-expansion'</span>]) {
                <span class="hljs-keyword">const</span> alias = key.split(<span class="hljs-string">'.'</span>).map(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">prop</span>) </span>{
                    <span class="hljs-keyword">return</span> camelCase(prop);
                }).join(<span class="hljs-string">'.'</span>);
                addNewAlias(key, alias);
            }
            <span class="hljs-keyword">const</span> value = processValue(key, val);
            <span class="hljs-keyword">const</span> splitKey = key.split(<span class="hljs-string">'.'</span>);
            setKey(argv, splitKey, value);
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-52" id="section-52"></a>
</div>
<p>handle populating aliases of the full key</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">            <span class="hljs-keyword">if</span> (flags.aliases[key]) {
                flags.aliases[key].forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">x</span>) </span>{
                    <span class="hljs-keyword">const</span> keyProperties = x.split(<span class="hljs-string">'.'</span>);
                    setKey(argv, keyProperties, value);
                });
            }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-53" id="section-53"></a>
</div>
<p>handle populating aliases of the first element of the dot-notation key</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">            <span class="hljs-keyword">if</span> (splitKey.length &gt; <span class="hljs-number">1</span> &amp;&amp; configuration[<span class="hljs-string">'dot-notation'</span>]) {
                (flags.aliases[splitKey[<span class="hljs-number">0</span>]] || []).forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">x</span>) </span>{
                    <span class="hljs-keyword">let</span> keyProperties = x.split(<span class="hljs-string">'.'</span>);
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-54" id="section-54"></a>
</div>
<p>expand alias with nested objects in key</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">                    <span class="hljs-keyword">const</span> a = [].concat(splitKey);
                    a.shift(); <span class="hljs-comment">// nuke the old key.</span>
                    keyProperties = keyProperties.concat(a);
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-55" id="section-55"></a>
</div>
<p>populate alias only if is not already an alias of the full key
(already populated above)</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">                    <span class="hljs-keyword">if</span> (!(flags.aliases[key] || []).includes(keyProperties.join(<span class="hljs-string">'.'</span>))) {
                        setKey(argv, keyProperties, value);
                    }
                });
            }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-56" id="section-56"></a>
</div>
<p>Set normalize getter and setter when key is in 'normalize' but isn't an array</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">            <span class="hljs-keyword">if</span> (checkAllAliases(key, flags.normalize) &amp;&amp; !checkAllAliases(key, flags.arrays)) {
                <span class="hljs-keyword">const</span> keys = [key].concat(flags.aliases[key] || []);
                keys.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">key</span>) </span>{
                    <span class="hljs-built_in">Object</span>.defineProperty(argvReturn, key, {
                        <span class="hljs-attr">enumerable</span>: <span class="hljs-literal">true</span>,
                        <span class="hljs-keyword">get</span>() {
                            <span class="hljs-keyword">return</span> val;
                        },
                        <span class="hljs-keyword">set</span>(value) {
                            val = <span class="hljs-keyword">typeof</span> value === <span class="hljs-string">'string'</span> ? mixin.normalize(value) : value;
                        }
                    });
                });
            }
        }
        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addNewAlias</span>(<span class="hljs-params">key, alias</span>) </span>{
            <span class="hljs-keyword">if</span> (!(flags.aliases[key] &amp;&amp; flags.aliases[key].length)) {
                flags.aliases[key] = [alias];
                newAliases[alias] = <span class="hljs-literal">true</span>;
            }
            <span class="hljs-keyword">if</span> (!(flags.aliases[alias] &amp;&amp; flags.aliases[alias].length)) {
                addNewAlias(alias, key);
            }
        }
        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">processValue</span>(<span class="hljs-params">key, val</span>) </span>{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-57" id="section-57"></a>
</div>
<p>strings may be quoted, clean this up as we assign values.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> val === <span class="hljs-string">'string'</span> &amp;&amp;
                (val[<span class="hljs-number">0</span>] === <span class="hljs-string">"'"</span> || val[<span class="hljs-number">0</span>] === <span class="hljs-string">'"'</span>) &amp;&amp;
                val[val.length - <span class="hljs-number">1</span>] === val[<span class="hljs-number">0</span>]) {
                val = val.substring(<span class="hljs-number">1</span>, val.length - <span class="hljs-number">1</span>);
            }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-58" id="section-58"></a>
</div>
<p>handle parsing boolean arguments --foo=true --bar false.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">            <span class="hljs-keyword">if</span> (checkAllAliases(key, flags.bools) || checkAllAliases(key, flags.counts)) {
                <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> val === <span class="hljs-string">'string'</span>)
                    val = val === <span class="hljs-string">'true'</span>;
            }
            <span class="hljs-keyword">let</span> value = <span class="hljs-built_in">Array</span>.isArray(val)
                ? val.map(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">v</span>) </span>{ <span class="hljs-keyword">return</span> maybeCoerceNumber(key, v); })
                : maybeCoerceNumber(key, val);
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-59" id="section-59"></a>
</div>
<p>increment a count given as arg (either no value or value parsed as boolean)</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">            <span class="hljs-keyword">if</span> (checkAllAliases(key, flags.counts) &amp;&amp; (isUndefined(value) || <span class="hljs-keyword">typeof</span> value === <span class="hljs-string">'boolean'</span>)) {
                value = increment();
            }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-60" id="section-60"></a>
</div>
<p>Set normalized value when key is in 'normalize' and in 'arrays'</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">            <span class="hljs-keyword">if</span> (checkAllAliases(key, flags.normalize) &amp;&amp; checkAllAliases(key, flags.arrays)) {
                <span class="hljs-keyword">if</span> (<span class="hljs-built_in">Array</span>.isArray(val))
                    value = val.map(<span class="hljs-function">(<span class="hljs-params">val</span>) =&gt;</span> { <span class="hljs-keyword">return</span> mixin.normalize(val); });
                <span class="hljs-keyword">else</span>
                    value = mixin.normalize(val);
            }
            <span class="hljs-keyword">return</span> value;
        }
        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">maybeCoerceNumber</span>(<span class="hljs-params">key, value</span>) </span>{
            <span class="hljs-keyword">if</span> (!configuration[<span class="hljs-string">'parse-positional-numbers'</span>] &amp;&amp; key === <span class="hljs-string">'_'</span>)
                <span class="hljs-keyword">return</span> value;
            <span class="hljs-keyword">if</span> (!checkAllAliases(key, flags.strings) &amp;&amp; !checkAllAliases(key, flags.bools) &amp;&amp; !<span class="hljs-built_in">Array</span>.isArray(value)) {
                <span class="hljs-keyword">const</span> shouldCoerceNumber = looksLikeNumber(value) &amp;&amp; configuration[<span class="hljs-string">'parse-numbers'</span>] &amp;&amp; (<span class="hljs-built_in">Number</span>.isSafeInteger(<span class="hljs-built_in">Math</span>.floor(<span class="hljs-built_in">parseFloat</span>(<span class="hljs-string">`<span class="hljs-subst">${value}</span>`</span>))));
                <span class="hljs-keyword">if</span> (shouldCoerceNumber || (!isUndefined(value) &amp;&amp; checkAllAliases(key, flags.numbers))) {
                    value = <span class="hljs-built_in">Number</span>(value);
                }
            }
            <span class="hljs-keyword">return</span> value;
        }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-61" id="section-61"></a>
</div>
<p>set args from config.json file, this should be
applied last so that defaults can be applied.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setConfig</span>(<span class="hljs-params">argv</span>) </span>{
            <span class="hljs-keyword">const</span> configLookup = <span class="hljs-built_in">Object</span>.create(<span class="hljs-literal">null</span>);
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-62" id="section-62"></a>
</div>
<p>expand defaults/aliases, in-case any happen to reference
the config.json file.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">            applyDefaultsAndAliases(configLookup, flags.aliases, defaults);
            <span class="hljs-built_in">Object</span>.keys(flags.configs).forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">configKey</span>) </span>{
                <span class="hljs-keyword">const</span> configPath = argv[configKey] || configLookup[configKey];
                <span class="hljs-keyword">if</span> (configPath) {
                    <span class="hljs-keyword">try</span> {
                        <span class="hljs-keyword">let</span> config = <span class="hljs-literal">null</span>;
                        <span class="hljs-keyword">const</span> resolvedConfigPath = mixin.resolve(mixin.cwd(), configPath);
                        <span class="hljs-keyword">const</span> resolveConfig = flags.configs[configKey];
                        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> resolveConfig === <span class="hljs-string">'function'</span>) {
                            <span class="hljs-keyword">try</span> {
                                config = resolveConfig(resolvedConfigPath);
                            }
                            <span class="hljs-keyword">catch</span> (e) {
                                config = e;
                            }
                            <span class="hljs-keyword">if</span> (config <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Error</span>) {
                                error = config;
                                <span class="hljs-keyword">return</span>;
                            }
                        }
                        <span class="hljs-keyword">else</span> {
                            config = mixin.require(resolvedConfigPath);
                        }
                        setConfigObject(config);
                    }
                    <span class="hljs-keyword">catch</span> (ex) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-63" id="section-63"></a>
</div>
<p>Deno will receive a PermissionDenied error if an attempt is
made to load config without the --allow-read flag:</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">                        <span class="hljs-keyword">if</span> (ex.name === <span class="hljs-string">'PermissionDenied'</span>)
                            error = ex;
                        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (argv[configKey])
                            error = <span class="hljs-built_in">Error</span>(__(<span class="hljs-string">'Invalid JSON config file: %s'</span>, configPath));
                    }
                }
            });
        }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-64" id="section-64"></a>
</div>
<p>set args from config object.
it recursively checks nested objects.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setConfigObject</span>(<span class="hljs-params">config, prev</span>) </span>{
            <span class="hljs-built_in">Object</span>.keys(config).forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">key</span>) </span>{
                <span class="hljs-keyword">const</span> value = config[key];
                <span class="hljs-keyword">const</span> fullKey = prev ? prev + <span class="hljs-string">'.'</span> + key : key;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-65" id="section-65"></a>
</div>
<p>if the value is an inner object and we have dot-notation
enabled, treat inner objects in config the same as
heavily nested dot notations (foo.bar.apple).</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">                <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> value === <span class="hljs-string">'object'</span> &amp;&amp; value !== <span class="hljs-literal">null</span> &amp;&amp; !<span class="hljs-built_in">Array</span>.isArray(value) &amp;&amp; configuration[<span class="hljs-string">'dot-notation'</span>]) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-66" id="section-66"></a>
</div>
<p>if the value is an object but not an array, check nested object</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">                    setConfigObject(value, fullKey);
                }
                <span class="hljs-keyword">else</span> {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-67" id="section-67"></a>
</div>
<p>setting arguments via CLI takes precedence over
values within the config file.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">                    <span class="hljs-keyword">if</span> (!hasKey(argv, fullKey.split(<span class="hljs-string">'.'</span>)) || (checkAllAliases(fullKey, flags.arrays) &amp;&amp; configuration[<span class="hljs-string">'combine-arrays'</span>])) {
                        setArg(fullKey, value);
                    }
                }
            });
        }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-68" id="section-68"></a>
</div>
<p>set all config objects passed in opts</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setConfigObjects</span>(<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> configObjects !== <span class="hljs-string">'undefined'</span>) {
                configObjects.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">configObject</span>) </span>{
                    setConfigObject(configObject);
                });
            }
        }
        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">applyEnvVars</span>(<span class="hljs-params">argv, configOnly</span>) </span>{
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> envPrefix === <span class="hljs-string">'undefined'</span>)
                <span class="hljs-keyword">return</span>;
            <span class="hljs-keyword">const</span> prefix = <span class="hljs-keyword">typeof</span> envPrefix === <span class="hljs-string">'string'</span> ? envPrefix : <span class="hljs-string">''</span>;
            <span class="hljs-keyword">const</span> env = mixin.env();
            <span class="hljs-built_in">Object</span>.keys(env).forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">envVar</span>) </span>{
                <span class="hljs-keyword">if</span> (prefix === <span class="hljs-string">''</span> || envVar.lastIndexOf(prefix, <span class="hljs-number">0</span>) === <span class="hljs-number">0</span>) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-69" id="section-69"></a>
</div>
<p>get array of nested keys and convert them to camel case</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">                    <span class="hljs-keyword">const</span> keys = envVar.split(<span class="hljs-string">'__'</span>).map(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">key, i</span>) </span>{
                        <span class="hljs-keyword">if</span> (i === <span class="hljs-number">0</span>) {
                            key = key.substring(prefix.length);
                        }
                        <span class="hljs-keyword">return</span> camelCase(key);
                    });
                    <span class="hljs-keyword">if</span> (((configOnly &amp;&amp; flags.configs[keys.join(<span class="hljs-string">'.'</span>)]) || !configOnly) &amp;&amp; !hasKey(argv, keys)) {
                        setArg(keys.join(<span class="hljs-string">'.'</span>), env[envVar]);
                    }
                }
            });
        }
        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">applyCoercions</span>(<span class="hljs-params">argv</span>) </span>{
            <span class="hljs-keyword">let</span> coerce;
            <span class="hljs-keyword">const</span> applied = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Set</span>();
            <span class="hljs-built_in">Object</span>.keys(argv).forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">key</span>) </span>{
                <span class="hljs-keyword">if</span> (!applied.has(key)) { <span class="hljs-comment">// If we haven't already coerced this option via one of its aliases</span>
                    coerce = checkAllAliases(key, flags.coercions);
                    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> coerce === <span class="hljs-string">'function'</span>) {
                        <span class="hljs-keyword">try</span> {
                            <span class="hljs-keyword">const</span> value = maybeCoerceNumber(key, coerce(argv[key]));
                            ([].concat(flags.aliases[key] || [], key)).forEach(<span class="hljs-function"><span class="hljs-params">ali</span> =&gt;</span> {
                                applied.add(ali);
                                argv[ali] = value;
                            });
                        }
                        <span class="hljs-keyword">catch</span> (err) {
                            error = err;
                        }
                    }
                }
            });
        }
        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setPlaceholderKeys</span>(<span class="hljs-params">argv</span>) </span>{
            flags.keys.forEach(<span class="hljs-function">(<span class="hljs-params">key</span>) =&gt;</span> {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-70" id="section-70"></a>
</div>
<p>don't set placeholder keys for dot notation options 'foo.bar'.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">                <span class="hljs-keyword">if</span> (~key.indexOf(<span class="hljs-string">'.'</span>))
                    <span class="hljs-keyword">return</span>;
                <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> argv[key] === <span class="hljs-string">'undefined'</span>)
                    argv[key] = <span class="hljs-literal">undefined</span>;
            });
            <span class="hljs-keyword">return</span> argv;
        }
        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">applyDefaultsAndAliases</span>(<span class="hljs-params">obj, aliases, defaults, canLog = false</span>) </span>{
            <span class="hljs-built_in">Object</span>.keys(defaults).forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">key</span>) </span>{
                <span class="hljs-keyword">if</span> (!hasKey(obj, key.split(<span class="hljs-string">'.'</span>))) {
                    setKey(obj, key.split(<span class="hljs-string">'.'</span>), defaults[key]);
                    <span class="hljs-keyword">if</span> (canLog)
                        defaulted[key] = <span class="hljs-literal">true</span>;
                    (aliases[key] || []).forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">x</span>) </span>{
                        <span class="hljs-keyword">if</span> (hasKey(obj, x.split(<span class="hljs-string">'.'</span>)))
                            <span class="hljs-keyword">return</span>;
                        setKey(obj, x.split(<span class="hljs-string">'.'</span>), defaults[key]);
                    });
                }
            });
        }
        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">hasKey</span>(<span class="hljs-params">obj, keys</span>) </span>{
            <span class="hljs-keyword">let</span> o = obj;
            <span class="hljs-keyword">if</span> (!configuration[<span class="hljs-string">'dot-notation'</span>])
                keys = [keys.join(<span class="hljs-string">'.'</span>)];
            keys.slice(<span class="hljs-number">0</span>, <span class="hljs-number">-1</span>).forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">key</span>) </span>{
                o = (o[key] || {});
            });
            <span class="hljs-keyword">const</span> key = keys[keys.length - <span class="hljs-number">1</span>];
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> o !== <span class="hljs-string">'object'</span>)
                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
            <span class="hljs-keyword">else</span>
                <span class="hljs-keyword">return</span> key <span class="hljs-keyword">in</span> o;
        }
        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setKey</span>(<span class="hljs-params">obj, keys, value</span>) </span>{
            <span class="hljs-keyword">let</span> o = obj;
            <span class="hljs-keyword">if</span> (!configuration[<span class="hljs-string">'dot-notation'</span>])
                keys = [keys.join(<span class="hljs-string">'.'</span>)];
            keys.slice(<span class="hljs-number">0</span>, <span class="hljs-number">-1</span>).forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">key</span>) </span>{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-71" id="section-71"></a>
</div>
<p>TODO(bcoe): in the next major version of yargs, switch to
Object.create(null) for dot notation:</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">                key = sanitizeKey(key);
                <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> o === <span class="hljs-string">'object'</span> &amp;&amp; o[key] === <span class="hljs-literal">undefined</span>) {
                    o[key] = {};
                }
                <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> o[key] !== <span class="hljs-string">'object'</span> || <span class="hljs-built_in">Array</span>.isArray(o[key])) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-72" id="section-72"></a>
</div>
<p>ensure that o[key] is an array, and that the last item is an empty object.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">                    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">Array</span>.isArray(o[key])) {
                        o[key].push({});
                    }
                    <span class="hljs-keyword">else</span> {
                        o[key] = [o[key], {}];
                    }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-73" id="section-73"></a>
</div>
<p>we want to update the empty object at the end of the o[key] array, so set o to that object</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">                    o = o[key][o[key].length - <span class="hljs-number">1</span>];
                }
                <span class="hljs-keyword">else</span> {
                    o = o[key];
                }
            });
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-74" id="section-74"></a>
</div>
<p>TODO(bcoe): in the next major version of yargs, switch to
Object.create(null) for dot notation:</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">            <span class="hljs-keyword">const</span> key = sanitizeKey(keys[keys.length - <span class="hljs-number">1</span>]);
            <span class="hljs-keyword">const</span> isTypeArray = checkAllAliases(keys.join(<span class="hljs-string">'.'</span>), flags.arrays);
            <span class="hljs-keyword">const</span> isValueArray = <span class="hljs-built_in">Array</span>.isArray(value);
            <span class="hljs-keyword">let</span> duplicate = configuration[<span class="hljs-string">'duplicate-arguments-array'</span>];
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-75" id="section-75"></a>
</div>
<p>nargs has higher priority than duplicate</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">            <span class="hljs-keyword">if</span> (!duplicate &amp;&amp; checkAllAliases(key, flags.nargs)) {
                duplicate = <span class="hljs-literal">true</span>;
                <span class="hljs-keyword">if</span> ((!isUndefined(o[key]) &amp;&amp; flags.nargs[key] === <span class="hljs-number">1</span>) || (<span class="hljs-built_in">Array</span>.isArray(o[key]) &amp;&amp; o[key].length === flags.nargs[key])) {
                    o[key] = <span class="hljs-literal">undefined</span>;
                }
            }
            <span class="hljs-keyword">if</span> (value === increment()) {
                o[key] = increment(o[key]);
            }
            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-built_in">Array</span>.isArray(o[key])) {
                <span class="hljs-keyword">if</span> (duplicate &amp;&amp; isTypeArray &amp;&amp; isValueArray) {
                    o[key] = configuration[<span class="hljs-string">'flatten-duplicate-arrays'</span>] ? o[key].concat(value) : (<span class="hljs-built_in">Array</span>.isArray(o[key][<span class="hljs-number">0</span>]) ? o[key] : [o[key]]).concat([value]);
                }
                <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!duplicate &amp;&amp; <span class="hljs-built_in">Boolean</span>(isTypeArray) === <span class="hljs-built_in">Boolean</span>(isValueArray)) {
                    o[key] = value;
                }
                <span class="hljs-keyword">else</span> {
                    o[key] = o[key].concat([value]);
                }
            }
            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (o[key] === <span class="hljs-literal">undefined</span> &amp;&amp; isTypeArray) {
                o[key] = isValueArray ? value : [value];
            }
            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (duplicate &amp;&amp; !(o[key] === <span class="hljs-literal">undefined</span> ||
                checkAllAliases(key, flags.counts) ||
                checkAllAliases(key, flags.bools))) {
                o[key] = [o[key], value];
            }
            <span class="hljs-keyword">else</span> {
                o[key] = value;
            }
        }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-76" id="section-76"></a>
</div>
<p>extend the aliases list with inferred aliases.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">extendAliases</span>(<span class="hljs-params">...args</span>) </span>{
            args.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">obj</span>) </span>{
                <span class="hljs-built_in">Object</span>.keys(obj || {}).forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">key</span>) </span>{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-77" id="section-77"></a>
</div>
<p>short-circuit if we've already added a key
to the aliases array, for example it might
exist in both 'opts.default' and 'opts.key'.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">                    <span class="hljs-keyword">if</span> (flags.aliases[key])
                        <span class="hljs-keyword">return</span>;
                    flags.aliases[key] = [].concat(aliases[key] || []);
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-78" id="section-78"></a>
</div>
<p>For &quot;--option-name&quot;, also set argv.optionName</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">                    flags.aliases[key].concat(key).forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">x</span>) </span>{
                        <span class="hljs-keyword">if</span> (<span class="hljs-regexp">/-/</span>.test(x) &amp;&amp; configuration[<span class="hljs-string">'camel-case-expansion'</span>]) {
                            <span class="hljs-keyword">const</span> c = camelCase(x);
                            <span class="hljs-keyword">if</span> (c !== key &amp;&amp; flags.aliases[key].indexOf(c) === <span class="hljs-number">-1</span>) {
                                flags.aliases[key].push(c);
                                newAliases[c] = <span class="hljs-literal">true</span>;
                            }
                        }
                    });
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-79" id="section-79"></a>
</div>
<p>For &quot;--optionName&quot;, also set argv['option-name']</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">                    flags.aliases[key].concat(key).forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">x</span>) </span>{
                        <span class="hljs-keyword">if</span> (x.length &gt; <span class="hljs-number">1</span> &amp;&amp; <span class="hljs-regexp">/[A-Z]/</span>.test(x) &amp;&amp; configuration[<span class="hljs-string">'camel-case-expansion'</span>]) {
                            <span class="hljs-keyword">const</span> c = decamelize(x, <span class="hljs-string">'-'</span>);
                            <span class="hljs-keyword">if</span> (c !== key &amp;&amp; flags.aliases[key].indexOf(c) === <span class="hljs-number">-1</span>) {
                                flags.aliases[key].push(c);
                                newAliases[c] = <span class="hljs-literal">true</span>;
                            }
                        }
                    });
                    flags.aliases[key].forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">x</span>) </span>{
                        flags.aliases[x] = [key].concat(flags.aliases[key].filter(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">y</span>) </span>{
                            <span class="hljs-keyword">return</span> x !== y;
                        }));
                    });
                });
            });
        }
        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">checkAllAliases</span>(<span class="hljs-params">key, flag</span>) </span>{
            <span class="hljs-keyword">const</span> toCheck = [].concat(flags.aliases[key] || [], key);
            <span class="hljs-keyword">const</span> keys = <span class="hljs-built_in">Object</span>.keys(flag);
            <span class="hljs-keyword">const</span> setAlias = toCheck.find(<span class="hljs-function"><span class="hljs-params">key</span> =&gt;</span> keys.includes(key));
            <span class="hljs-keyword">return</span> setAlias ? flag[setAlias] : <span class="hljs-literal">false</span>;
        }
        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">hasAnyFlag</span>(<span class="hljs-params">key</span>) </span>{
            <span class="hljs-keyword">const</span> flagsKeys = <span class="hljs-built_in">Object</span>.keys(flags);
            <span class="hljs-keyword">const</span> toCheck = [].concat(flagsKeys.map(<span class="hljs-function"><span class="hljs-params">k</span> =&gt;</span> flags[k]));
            <span class="hljs-keyword">return</span> toCheck.some(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">flag</span>) </span>{
                <span class="hljs-keyword">return</span> <span class="hljs-built_in">Array</span>.isArray(flag) ? flag.includes(key) : flag[key];
            });
        }
        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">hasFlagsMatching</span>(<span class="hljs-params">arg, ...patterns</span>) </span>{
            <span class="hljs-keyword">const</span> toCheck = [].concat(...patterns);
            <span class="hljs-keyword">return</span> toCheck.some(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">pattern</span>) </span>{
                <span class="hljs-keyword">const</span> match = arg.match(pattern);
                <span class="hljs-keyword">return</span> match &amp;&amp; hasAnyFlag(match[<span class="hljs-number">1</span>]);
            });
        }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-80" id="section-80"></a>
</div>
<p>based on a simplified version of the short flag group parsing logic</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">hasAllShortFlags</span>(<span class="hljs-params">arg</span>) </span>{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-81" id="section-81"></a>
</div>
<p>if this is a negative number, or doesn't start with a single hyphen, it's not a short flag group</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">            <span class="hljs-keyword">if</span> (arg.match(negative) || !arg.match(<span class="hljs-regexp">/^-[^-]+/</span>)) {
                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
            }
            <span class="hljs-keyword">let</span> hasAllFlags = <span class="hljs-literal">true</span>;
            <span class="hljs-keyword">let</span> next;
            <span class="hljs-keyword">const</span> letters = arg.slice(<span class="hljs-number">1</span>).split(<span class="hljs-string">''</span>);
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> j = <span class="hljs-number">0</span>; j &lt; letters.length; j++) {
                next = arg.slice(j + <span class="hljs-number">2</span>);
                <span class="hljs-keyword">if</span> (!hasAnyFlag(letters[j])) {
                    hasAllFlags = <span class="hljs-literal">false</span>;
                    <span class="hljs-keyword">break</span>;
                }
                <span class="hljs-keyword">if</span> ((letters[j + <span class="hljs-number">1</span>] &amp;&amp; letters[j + <span class="hljs-number">1</span>] === <span class="hljs-string">'='</span>) ||
                    next === <span class="hljs-string">'-'</span> ||
                    (<span class="hljs-regexp">/[A-Za-z]/</span>.test(letters[j]) &amp;&amp; <span class="hljs-regexp">/^-?\d+(\.\d*)?(e-?\d+)?$/</span>.test(next)) ||
                    (letters[j + <span class="hljs-number">1</span>] &amp;&amp; letters[j + <span class="hljs-number">1</span>].match(<span class="hljs-regexp">/\W/</span>))) {
                    <span class="hljs-keyword">break</span>;
                }
            }
            <span class="hljs-keyword">return</span> hasAllFlags;
        }
        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isUnknownOptionAsArg</span>(<span class="hljs-params">arg</span>) </span>{
            <span class="hljs-keyword">return</span> configuration[<span class="hljs-string">'unknown-options-as-args'</span>] &amp;&amp; isUnknownOption(arg);
        }
        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isUnknownOption</span>(<span class="hljs-params">arg</span>) </span>{
            arg = arg.replace(<span class="hljs-regexp">/^-{3,}/</span>, <span class="hljs-string">'--'</span>);
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-82" id="section-82"></a>
</div>
<p>ignore negative numbers</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">            <span class="hljs-keyword">if</span> (arg.match(negative)) {
                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
            }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-83" id="section-83"></a>
</div>
<p>if this is a short option group and all of them are configured, it isn't unknown</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">            <span class="hljs-keyword">if</span> (hasAllShortFlags(arg)) {
                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
            }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-84" id="section-84"></a>
</div>
<p>e.g. '--count=2'</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">            <span class="hljs-keyword">const</span> flagWithEquals = <span class="hljs-regexp">/^-+([^=]+?)=[\s\S]*$/</span>;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-85" id="section-85"></a>
</div>
<p>e.g. '-a' or '--arg'</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">            <span class="hljs-keyword">const</span> normalFlag = <span class="hljs-regexp">/^-+([^=]+?)$/</span>;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-86" id="section-86"></a>
</div>
<p>e.g. '-a-'</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">            <span class="hljs-keyword">const</span> flagEndingInHyphen = <span class="hljs-regexp">/^-+([^=]+?)-$/</span>;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-87" id="section-87"></a>
</div>
<p>e.g. '-abc123'</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">            <span class="hljs-keyword">const</span> flagEndingInDigits = <span class="hljs-regexp">/^-+([^=]+?\d+)$/</span>;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-88" id="section-88"></a>
</div>
<p>e.g. '-a/usr/local'</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">            <span class="hljs-keyword">const</span> flagEndingInNonWordCharacters = <span class="hljs-regexp">/^-+([^=]+?)\W+.*$/</span>;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-89" id="section-89"></a>
</div>
<p>check the different types of flag styles, including negatedBoolean, a pattern defined near the start of the parse method</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">            <span class="hljs-keyword">return</span> !hasFlagsMatching(arg, flagWithEquals, negatedBoolean, normalFlag, flagEndingInHyphen, flagEndingInDigits, flagEndingInNonWordCharacters);
        }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-90" id="section-90"></a>
</div>
<p>make a best effort to pick a default value
for an option based on name and type.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">defaultValue</span>(<span class="hljs-params">key</span>) </span>{
            <span class="hljs-keyword">if</span> (!checkAllAliases(key, flags.bools) &amp;&amp;
                !checkAllAliases(key, flags.counts) &amp;&amp;
                <span class="hljs-string">`<span class="hljs-subst">${key}</span>`</span> <span class="hljs-keyword">in</span> defaults) {
                <span class="hljs-keyword">return</span> defaults[key];
            }
            <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">return</span> defaultForType(guessType(key));
            }
        }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-91" id="section-91"></a>
</div>
<p>return a default value, given the type of a flag.,</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">defaultForType</span>(<span class="hljs-params">type</span>) </span>{
            <span class="hljs-keyword">const</span> def = {
                [DefaultValuesForTypeKey.BOOLEAN]: <span class="hljs-literal">true</span>,
                [DefaultValuesForTypeKey.STRING]: <span class="hljs-string">''</span>,
                [DefaultValuesForTypeKey.NUMBER]: <span class="hljs-literal">undefined</span>,
                [DefaultValuesForTypeKey.ARRAY]: []
            };
            <span class="hljs-keyword">return</span> def[type];
        }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-92" id="section-92"></a>
</div>
<p>given a flag, enforce a default type.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">guessType</span>(<span class="hljs-params">key</span>) </span>{
            <span class="hljs-keyword">let</span> type = DefaultValuesForTypeKey.BOOLEAN;
            <span class="hljs-keyword">if</span> (checkAllAliases(key, flags.strings))
                type = DefaultValuesForTypeKey.STRING;
            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (checkAllAliases(key, flags.numbers))
                type = DefaultValuesForTypeKey.NUMBER;
            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (checkAllAliases(key, flags.bools))
                type = DefaultValuesForTypeKey.BOOLEAN;
            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (checkAllAliases(key, flags.arrays))
                type = DefaultValuesForTypeKey.ARRAY;
            <span class="hljs-keyword">return</span> type;
        }
        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isUndefined</span>(<span class="hljs-params">num</span>) </span>{
            <span class="hljs-keyword">return</span> num === <span class="hljs-literal">undefined</span>;
        }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-93" id="section-93"></a>
</div>
<p>check user configuration settings for inconsistencies</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">checkConfiguration</span>(<span class="hljs-params"></span>) </span>{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-94" id="section-94"></a>
</div>
<p>count keys should not be set as array/narg</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">            <span class="hljs-built_in">Object</span>.keys(flags.counts).find(<span class="hljs-function"><span class="hljs-params">key</span> =&gt;</span> {
                <span class="hljs-keyword">if</span> (checkAllAliases(key, flags.arrays)) {
                    error = <span class="hljs-built_in">Error</span>(__(<span class="hljs-string">'Invalid configuration: %s, opts.count excludes opts.array.'</span>, key));
                    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
                }
                <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (checkAllAliases(key, flags.nargs)) {
                    error = <span class="hljs-built_in">Error</span>(__(<span class="hljs-string">'Invalid configuration: %s, opts.count excludes opts.narg.'</span>, key));
                    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
                }
                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
            });
        }
        <span class="hljs-keyword">return</span> {
            <span class="hljs-attr">aliases</span>: <span class="hljs-built_in">Object</span>.assign({}, flags.aliases),
            <span class="hljs-attr">argv</span>: <span class="hljs-built_in">Object</span>.assign(argvReturn, argv),
            <span class="hljs-attr">configuration</span>: configuration,
            <span class="hljs-attr">defaulted</span>: <span class="hljs-built_in">Object</span>.assign({}, defaulted),
            <span class="hljs-attr">error</span>: error,
            <span class="hljs-attr">newAliases</span>: <span class="hljs-built_in">Object</span>.assign({}, newAliases)
        };
    }
}
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-95" id="section-95"></a>
</div>
<p>if any aliases reference each other, we should
merge them together.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">combineAliases</span>(<span class="hljs-params">aliases</span>) </span>{
    <span class="hljs-keyword">const</span> aliasArrays = [];
    <span class="hljs-keyword">const</span> combined = <span class="hljs-built_in">Object</span>.create(<span class="hljs-literal">null</span>);
    <span class="hljs-keyword">let</span> change = <span class="hljs-literal">true</span>;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-96" id="section-96"></a>
</div>
<p>turn alias lookup hash {key: ['alias1', 'alias2']} into
a simple array ['key', 'alias1', 'alias2']</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-built_in">Object</span>.keys(aliases).forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">key</span>) </span>{
        aliasArrays.push([].concat(aliases[key], key));
    });
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-97" id="section-97"></a>
</div>
<p>combine arrays until zero changes are
made in an iteration.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">while</span> (change) {
        change = <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; aliasArrays.length; i++) {
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> ii = i + <span class="hljs-number">1</span>; ii &lt; aliasArrays.length; ii++) {
                <span class="hljs-keyword">const</span> intersect = aliasArrays[i].filter(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">v</span>) </span>{
                    <span class="hljs-keyword">return</span> aliasArrays[ii].indexOf(v) !== <span class="hljs-number">-1</span>;
                });
                <span class="hljs-keyword">if</span> (intersect.length) {
                    aliasArrays[i] = aliasArrays[i].concat(aliasArrays[ii]);
                    aliasArrays.splice(ii, <span class="hljs-number">1</span>);
                    change = <span class="hljs-literal">true</span>;
                    <span class="hljs-keyword">break</span>;
                }
            }
        }
    }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-98" id="section-98"></a>
</div>
<p>map arrays back to the hash-lookup (de-dupe while
we're at it).</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    aliasArrays.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">aliasArray</span>) </span>{
        aliasArray = aliasArray.filter(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">v, i, self</span>) </span>{
            <span class="hljs-keyword">return</span> self.indexOf(v) === i;
        });
        <span class="hljs-keyword">const</span> lastAlias = aliasArray.pop();
        <span class="hljs-keyword">if</span> (lastAlias !== <span class="hljs-literal">undefined</span> &amp;&amp; <span class="hljs-keyword">typeof</span> lastAlias === <span class="hljs-string">'string'</span>) {
            combined[lastAlias] = aliasArray;
        }
    });
    <span class="hljs-keyword">return</span> combined;
}
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-99" id="section-99"></a>
</div>
<p>this function should only be called when a count is given as an arg
it is NOT called to set a default value
thus we can start the count at 1 instead of 0</p>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">increment</span>(<span class="hljs-params">orig</span>) </span>{
    <span class="hljs-keyword">return</span> orig !== <span class="hljs-literal">undefined</span> ? orig + <span class="hljs-number">1</span> : <span class="hljs-number">1</span>;
}
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-100" id="section-100"></a>
</div>
<p>TODO(bcoe): in the next major version of yargs, switch to
Object.create(null) for dot notation:</p>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sanitizeKey</span>(<span class="hljs-params">key</span>) </span>{
    <span class="hljs-keyword">if</span> (key === <span class="hljs-string">'__proto__'</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-string">'___proto___'</span>;
    <span class="hljs-keyword">return</span> key;
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-101" id="section-101"></a>
</div>
<div class="dox">
<div class="summary">
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>
See https://github.com/yargs/yargs-parser#supported-nodejs-versions for our
version support policy. The YARGS_MIN_NODE_VERSION is used for testing only.

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-keyword">const</span> minNodeVersion = (process &amp;&amp; process.env &amp;&amp; process.env.YARGS_MIN_NODE_VERSION)
    ? <span class="hljs-built_in">Number</span>(process.env.YARGS_MIN_NODE_VERSION)
    : <span class="hljs-number">10</span>;
<span class="hljs-keyword">if</span> (process &amp;&amp; process.version) {
    <span class="hljs-keyword">const</span> major = <span class="hljs-built_in">Number</span>(process.version.match(<span class="hljs-regexp">/v([^.]+)/</span>)[<span class="hljs-number">1</span>]);
    <span class="hljs-keyword">if</span> (major &lt; minNodeVersion) {
        <span class="hljs-keyword">throw</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">`yargs parser supports a minimum Node.js version of <span class="hljs-subst">${minNodeVersion}</span>. Read our version support policy: https://github.com/yargs/yargs-parser#supported-nodejs-versions`</span>);
    }
}
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-102" id="section-102"></a>
</div>
<p>Creates a yargs-parser instance using Node.js standard libraries:</p>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-keyword">const</span> env = process ? process.env : {};
<span class="hljs-keyword">const</span> parser = <span class="hljs-keyword">new</span> YargsParser({
    <span class="hljs-attr">cwd</span>: process.cwd,
    <span class="hljs-attr">env</span>: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
        <span class="hljs-keyword">return</span> env;
    },
    <span class="hljs-attr">format</span>: <span class="hljs-built_in">require</span>$$<span class="hljs-number">2.</span>format,
    <span class="hljs-attr">normalize</span>: <span class="hljs-built_in">require</span>$$<span class="hljs-number">0.n</span>ormalize,
    <span class="hljs-attr">resolve</span>: <span class="hljs-built_in">require</span>$$<span class="hljs-number">0.</span>resolve,
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-103" id="section-103"></a>
</div>
<p>TODO: figure  out a  way to combine ESM and CJS coverage, such  that
we can exercise all the lines below:</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-built_in">require</span>: <span class="hljs-function">(<span class="hljs-params">path</span>) =&gt;</span> {
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-built_in">require</span> !== <span class="hljs-string">'undefined'</span>) {
            <span class="hljs-keyword">return</span> <span class="hljs-built_in">require</span>(path);
        }
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (path.match(<span class="hljs-regexp">/\.json$/</span>)) {
            <span class="hljs-keyword">return</span> <span class="hljs-built_in">require</span>$$<span class="hljs-number">0</span>$<span class="hljs-number">1.</span>readFileSync(path, <span class="hljs-string">'utf8'</span>);
        }
        <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">throw</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'only .json config files are supported in ESM'</span>);
        }
    }
});
<span class="hljs-keyword">const</span> yargsParser = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Parser</span>(<span class="hljs-params">args, opts</span>) </span>{
    <span class="hljs-keyword">const</span> result = parser.parse(args.slice(), opts);
    <span class="hljs-keyword">return</span> result.argv;
};
yargsParser.detailed = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">args, opts</span>) </span>{
    <span class="hljs-keyword">return</span> parser.parse(args.slice(), opts);
};
yargsParser.camelCase = camelCase;
yargsParser.decamelize = decamelize;
yargsParser.looksLikeNumber = looksLikeNumber;
<span class="hljs-keyword">const</span> argParser = yargsParser;

<span class="hljs-keyword">var</span> parseMs = <span class="hljs-function"><span class="hljs-params">milliseconds</span> =&gt;</span> {
	<span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> milliseconds !== <span class="hljs-string">'number'</span>) {
		<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">'Expected a number'</span>);
	}

	<span class="hljs-keyword">const</span> roundTowardsZero = milliseconds &gt; <span class="hljs-number">0</span> ? <span class="hljs-built_in">Math</span>.floor : <span class="hljs-built_in">Math</span>.ceil;

	<span class="hljs-keyword">return</span> {
		<span class="hljs-attr">days</span>: roundTowardsZero(milliseconds / <span class="hljs-number">86400000</span>),
		<span class="hljs-attr">hours</span>: roundTowardsZero(milliseconds / <span class="hljs-number">3600000</span>) % <span class="hljs-number">24</span>,
		<span class="hljs-attr">minutes</span>: roundTowardsZero(milliseconds / <span class="hljs-number">60000</span>) % <span class="hljs-number">60</span>,
		<span class="hljs-attr">seconds</span>: roundTowardsZero(milliseconds / <span class="hljs-number">1000</span>) % <span class="hljs-number">60</span>,
		<span class="hljs-attr">milliseconds</span>: roundTowardsZero(milliseconds) % <span class="hljs-number">1000</span>,
		<span class="hljs-attr">microseconds</span>: roundTowardsZero(milliseconds * <span class="hljs-number">1000</span>) % <span class="hljs-number">1000</span>,
		<span class="hljs-attr">nanoseconds</span>: roundTowardsZero(milliseconds * <span class="hljs-number">1e6</span>) % <span class="hljs-number">1000</span>
	};
};

<span class="hljs-keyword">const</span> parseMilliseconds = parseMs;

<span class="hljs-keyword">const</span> pluralize = <span class="hljs-function">(<span class="hljs-params">word, count</span>) =&gt;</span> count === <span class="hljs-number">1</span> ? word : <span class="hljs-string">`<span class="hljs-subst">${word}</span>s`</span>;

<span class="hljs-keyword">const</span> SECOND_ROUNDING_EPSILON = <span class="hljs-number">0.0000001</span>;

<span class="hljs-keyword">var</span> prettyMs = <span class="hljs-function">(<span class="hljs-params">milliseconds, options = {}</span>) =&gt;</span> {
	<span class="hljs-keyword">if</span> (!<span class="hljs-built_in">Number</span>.isFinite(milliseconds)) {
		<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">'Expected a finite number'</span>);
	}

	<span class="hljs-keyword">if</span> (options.colonNotation) {
		options.compact = <span class="hljs-literal">false</span>;
		options.formatSubMilliseconds = <span class="hljs-literal">false</span>;
		options.separateMilliseconds = <span class="hljs-literal">false</span>;
		options.verbose = <span class="hljs-literal">false</span>;
	}

	<span class="hljs-keyword">if</span> (options.compact) {
		options.secondsDecimalDigits = <span class="hljs-number">0</span>;
		options.millisecondsDecimalDigits = <span class="hljs-number">0</span>;
	}

	<span class="hljs-keyword">const</span> result = [];

	<span class="hljs-keyword">const</span> floorDecimals = <span class="hljs-function">(<span class="hljs-params">value, decimalDigits</span>) =&gt;</span> {
		<span class="hljs-keyword">const</span> flooredInterimValue = <span class="hljs-built_in">Math</span>.floor((value * (<span class="hljs-number">10</span> ** decimalDigits)) + SECOND_ROUNDING_EPSILON);
		<span class="hljs-keyword">const</span> flooredValue = <span class="hljs-built_in">Math</span>.round(flooredInterimValue) / (<span class="hljs-number">10</span> ** decimalDigits);
		<span class="hljs-keyword">return</span> flooredValue.toFixed(decimalDigits);
	};

	<span class="hljs-keyword">const</span> add = <span class="hljs-function">(<span class="hljs-params">value, long, short, valueString</span>) =&gt;</span> {
		<span class="hljs-keyword">if</span> ((result.length === <span class="hljs-number">0</span> || !options.colonNotation) &amp;&amp; value === <span class="hljs-number">0</span> &amp;&amp; !(options.colonNotation &amp;&amp; short === <span class="hljs-string">'m'</span>)) {
			<span class="hljs-keyword">return</span>;
		}

		valueString = (valueString || value || <span class="hljs-string">'0'</span>).toString();
		<span class="hljs-keyword">let</span> prefix;
		<span class="hljs-keyword">let</span> suffix;
		<span class="hljs-keyword">if</span> (options.colonNotation) {
			prefix = result.length &gt; <span class="hljs-number">0</span> ? <span class="hljs-string">':'</span> : <span class="hljs-string">''</span>;
			suffix = <span class="hljs-string">''</span>;
			<span class="hljs-keyword">const</span> wholeDigits = valueString.includes(<span class="hljs-string">'.'</span>) ? valueString.split(<span class="hljs-string">'.'</span>)[<span class="hljs-number">0</span>].length : valueString.length;
			<span class="hljs-keyword">const</span> minLength = result.length &gt; <span class="hljs-number">0</span> ? <span class="hljs-number">2</span> : <span class="hljs-number">1</span>;
			valueString = <span class="hljs-string">'0'</span>.repeat(<span class="hljs-built_in">Math</span>.max(<span class="hljs-number">0</span>, minLength - wholeDigits)) + valueString;
		} <span class="hljs-keyword">else</span> {
			prefix = <span class="hljs-string">''</span>;
			suffix = options.verbose ? <span class="hljs-string">' '</span> + pluralize(long, value) : short;
		}

		result.push(prefix + valueString + suffix);
	};

	<span class="hljs-keyword">const</span> parsed = parseMilliseconds(milliseconds);

	add(<span class="hljs-built_in">Math</span>.trunc(parsed.days / <span class="hljs-number">365</span>), <span class="hljs-string">'year'</span>, <span class="hljs-string">'y'</span>);
	add(parsed.days % <span class="hljs-number">365</span>, <span class="hljs-string">'day'</span>, <span class="hljs-string">'d'</span>);
	add(parsed.hours, <span class="hljs-string">'hour'</span>, <span class="hljs-string">'h'</span>);
	add(parsed.minutes, <span class="hljs-string">'minute'</span>, <span class="hljs-string">'m'</span>);

	<span class="hljs-keyword">if</span> (
		options.separateMilliseconds ||
		options.formatSubMilliseconds ||
		(!options.colonNotation &amp;&amp; milliseconds &lt; <span class="hljs-number">1000</span>)
	) {
		add(parsed.seconds, <span class="hljs-string">'second'</span>, <span class="hljs-string">'s'</span>);
		<span class="hljs-keyword">if</span> (options.formatSubMilliseconds) {
			add(parsed.milliseconds, <span class="hljs-string">'millisecond'</span>, <span class="hljs-string">'ms'</span>);
			add(parsed.microseconds, <span class="hljs-string">'microsecond'</span>, <span class="hljs-string">'s'</span>);
			add(parsed.nanoseconds, <span class="hljs-string">'nanosecond'</span>, <span class="hljs-string">'ns'</span>);
		} <span class="hljs-keyword">else</span> {
			<span class="hljs-keyword">const</span> millisecondsAndBelow =
				parsed.milliseconds +
				(parsed.microseconds / <span class="hljs-number">1000</span>) +
				(parsed.nanoseconds / <span class="hljs-number">1e6</span>);

			<span class="hljs-keyword">const</span> millisecondsDecimalDigits =
				<span class="hljs-keyword">typeof</span> options.millisecondsDecimalDigits === <span class="hljs-string">'number'</span> ?
					options.millisecondsDecimalDigits :
					<span class="hljs-number">0</span>;

			<span class="hljs-keyword">const</span> roundedMiliseconds = millisecondsAndBelow &gt;= <span class="hljs-number">1</span> ?
				<span class="hljs-built_in">Math</span>.round(millisecondsAndBelow) :
				<span class="hljs-built_in">Math</span>.ceil(millisecondsAndBelow);

			<span class="hljs-keyword">const</span> millisecondsString = millisecondsDecimalDigits ?
				millisecondsAndBelow.toFixed(millisecondsDecimalDigits) :
				roundedMiliseconds;

			add(
				<span class="hljs-built_in">Number</span>.parseFloat(millisecondsString, <span class="hljs-number">10</span>),
				<span class="hljs-string">'millisecond'</span>,
				<span class="hljs-string">'ms'</span>,
				millisecondsString
			);
		}
	} <span class="hljs-keyword">else</span> {
		<span class="hljs-keyword">const</span> seconds = (milliseconds / <span class="hljs-number">1000</span>) % <span class="hljs-number">60</span>;
		<span class="hljs-keyword">const</span> secondsDecimalDigits =
			<span class="hljs-keyword">typeof</span> options.secondsDecimalDigits === <span class="hljs-string">'number'</span> ?
				options.secondsDecimalDigits :
				<span class="hljs-number">1</span>;
		<span class="hljs-keyword">const</span> secondsFixed = floorDecimals(seconds, secondsDecimalDigits);
		<span class="hljs-keyword">const</span> secondsString = options.keepDecimalsOnWholeSeconds ?
			secondsFixed :
			secondsFixed.replace(<span class="hljs-regexp">/\.0+$/</span>, <span class="hljs-string">''</span>);
		add(<span class="hljs-built_in">Number</span>.parseFloat(secondsString, <span class="hljs-number">10</span>), <span class="hljs-string">'second'</span>, <span class="hljs-string">'s'</span>, secondsString);
	}

	<span class="hljs-keyword">if</span> (result.length === <span class="hljs-number">0</span>) {
		<span class="hljs-keyword">return</span> <span class="hljs-string">'0'</span> + (options.verbose ? <span class="hljs-string">' milliseconds'</span> : <span class="hljs-string">'ms'</span>);
	}

	<span class="hljs-keyword">if</span> (options.compact) {
		<span class="hljs-keyword">return</span> result[<span class="hljs-number">0</span>];
	}

	<span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> options.unitCount === <span class="hljs-string">'number'</span>) {
		<span class="hljs-keyword">const</span> separator = options.colonNotation ? <span class="hljs-string">''</span> : <span class="hljs-string">' '</span>;
		<span class="hljs-keyword">return</span> result.slice(<span class="hljs-number">0</span>, <span class="hljs-built_in">Math</span>.max(options.unitCount, <span class="hljs-number">1</span>)).join(separator);
	}

	<span class="hljs-keyword">return</span> options.colonNotation ? result.join(<span class="hljs-string">''</span>) : result.join(<span class="hljs-string">' '</span>);
};

<span class="hljs-keyword">const</span> ms = prettyMs;

<span class="hljs-keyword">const</span> BYTE_UNITS = [
	<span class="hljs-string">'B'</span>,
	<span class="hljs-string">'kB'</span>,
	<span class="hljs-string">'MB'</span>,
	<span class="hljs-string">'GB'</span>,
	<span class="hljs-string">'TB'</span>,
	<span class="hljs-string">'PB'</span>,
	<span class="hljs-string">'EB'</span>,
	<span class="hljs-string">'ZB'</span>,
	<span class="hljs-string">'YB'</span>
];

<span class="hljs-keyword">const</span> BIBYTE_UNITS = [
	<span class="hljs-string">'B'</span>,
	<span class="hljs-string">'kiB'</span>,
	<span class="hljs-string">'MiB'</span>,
	<span class="hljs-string">'GiB'</span>,
	<span class="hljs-string">'TiB'</span>,
	<span class="hljs-string">'PiB'</span>,
	<span class="hljs-string">'EiB'</span>,
	<span class="hljs-string">'ZiB'</span>,
	<span class="hljs-string">'YiB'</span>
];

<span class="hljs-keyword">const</span> BIT_UNITS = [
	<span class="hljs-string">'b'</span>,
	<span class="hljs-string">'kbit'</span>,
	<span class="hljs-string">'Mbit'</span>,
	<span class="hljs-string">'Gbit'</span>,
	<span class="hljs-string">'Tbit'</span>,
	<span class="hljs-string">'Pbit'</span>,
	<span class="hljs-string">'Ebit'</span>,
	<span class="hljs-string">'Zbit'</span>,
	<span class="hljs-string">'Ybit'</span>
];

<span class="hljs-keyword">const</span> BIBIT_UNITS = [
	<span class="hljs-string">'b'</span>,
	<span class="hljs-string">'kibit'</span>,
	<span class="hljs-string">'Mibit'</span>,
	<span class="hljs-string">'Gibit'</span>,
	<span class="hljs-string">'Tibit'</span>,
	<span class="hljs-string">'Pibit'</span>,
	<span class="hljs-string">'Eibit'</span>,
	<span class="hljs-string">'Zibit'</span>,
	<span class="hljs-string">'Yibit'</span>
];

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-104" id="section-104"></a>
</div>
<div class="dox">
<div class="summary">
<p>Formats the given number using <code>Number#toLocaleString</code>.</p>
<ul>
<li>If locale is a string, the value is expected to be a locale-key (for example: <code>de</code>).</li>
<li>If locale is true, the system default locale is used for translation.</li>
<li>If no value for locale is specified, the number is returned unmodified.</li>
</ul>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-keyword">const</span> toLocaleString = <span class="hljs-function">(<span class="hljs-params">number, locale, options</span>) =&gt;</span> {
	<span class="hljs-keyword">let</span> result = number;
	<span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> locale === <span class="hljs-string">'string'</span> || <span class="hljs-built_in">Array</span>.isArray(locale)) {
		result = number.toLocaleString(locale, options);
	} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (locale === <span class="hljs-literal">true</span> || options !== <span class="hljs-literal">undefined</span>) {
		result = number.toLocaleString(<span class="hljs-literal">undefined</span>, options);
	}

	<span class="hljs-keyword">return</span> result;
};

<span class="hljs-keyword">var</span> prettyBytes = <span class="hljs-function">(<span class="hljs-params">number, options</span>) =&gt;</span> {
	<span class="hljs-keyword">if</span> (!<span class="hljs-built_in">Number</span>.isFinite(number)) {
		<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">`Expected a finite number, got <span class="hljs-subst">${<span class="hljs-keyword">typeof</span> number}</span>: <span class="hljs-subst">${number}</span>`</span>);
	}

	options = <span class="hljs-built_in">Object</span>.assign({<span class="hljs-attr">bits</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">binary</span>: <span class="hljs-literal">false</span>}, options);

	<span class="hljs-keyword">const</span> UNITS = options.bits ?
		(options.binary ? BIBIT_UNITS : BIT_UNITS) :
		(options.binary ? BIBYTE_UNITS : BYTE_UNITS);

	<span class="hljs-keyword">if</span> (options.signed &amp;&amp; number === <span class="hljs-number">0</span>) {
		<span class="hljs-keyword">return</span> <span class="hljs-string">` 0 <span class="hljs-subst">${UNITS[<span class="hljs-number">0</span>]}</span>`</span>;
	}

	<span class="hljs-keyword">const</span> isNegative = number &lt; <span class="hljs-number">0</span>;
	<span class="hljs-keyword">const</span> prefix = isNegative ? <span class="hljs-string">'-'</span> : (options.signed ? <span class="hljs-string">'+'</span> : <span class="hljs-string">''</span>);

	<span class="hljs-keyword">if</span> (isNegative) {
		number = -number;
	}

	<span class="hljs-keyword">let</span> localeOptions;

	<span class="hljs-keyword">if</span> (options.minimumFractionDigits !== <span class="hljs-literal">undefined</span>) {
		localeOptions = {<span class="hljs-attr">minimumFractionDigits</span>: options.minimumFractionDigits};
	}

	<span class="hljs-keyword">if</span> (options.maximumFractionDigits !== <span class="hljs-literal">undefined</span>) {
		localeOptions = <span class="hljs-built_in">Object</span>.assign({<span class="hljs-attr">maximumFractionDigits</span>: options.maximumFractionDigits}, localeOptions);
	}

	<span class="hljs-keyword">if</span> (number &lt; <span class="hljs-number">1</span>) {
		<span class="hljs-keyword">const</span> numberString = toLocaleString(number, options.locale, localeOptions);
		<span class="hljs-keyword">return</span> prefix + numberString + <span class="hljs-string">' '</span> + UNITS[<span class="hljs-number">0</span>];
	}

	<span class="hljs-keyword">const</span> exponent = <span class="hljs-built_in">Math</span>.min(<span class="hljs-built_in">Math</span>.floor(options.binary ? <span class="hljs-built_in">Math</span>.log(number) / <span class="hljs-built_in">Math</span>.log(<span class="hljs-number">1024</span>) : <span class="hljs-built_in">Math</span>.log10(number) / <span class="hljs-number">3</span>), UNITS.length - <span class="hljs-number">1</span>);
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-105" id="section-105"></a>
</div>
<p>eslint-disable-next-line unicorn/prefer-exponentiation-operator</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	number /= <span class="hljs-built_in">Math</span>.pow(options.binary ? <span class="hljs-number">1024</span> : <span class="hljs-number">1000</span>, exponent);

	<span class="hljs-keyword">if</span> (!localeOptions) {
		number = number.toPrecision(<span class="hljs-number">3</span>);
	}

	<span class="hljs-keyword">const</span> numberString = toLocaleString(<span class="hljs-built_in">Number</span>(number), options.locale, localeOptions);

	<span class="hljs-keyword">const</span> unit = UNITS[exponent];

	<span class="hljs-keyword">return</span> prefix + numberString + <span class="hljs-string">' '</span> + unit;
};

<span class="hljs-keyword">const</span> prettyBytes$<span class="hljs-number">1</span> = prettyBytes;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">printTimings</span>(<span class="hljs-params">timings</span>) </span>{
    <span class="hljs-built_in">Object</span>.entries(timings).forEach(<span class="hljs-function">(<span class="hljs-params">[label, [time, memory, total]]</span>) =&gt;</span> {
        <span class="hljs-keyword">const</span> appliedColor = label[<span class="hljs-number">0</span>] === <span class="hljs-string">'#'</span> ? <span class="hljs-function">(<span class="hljs-params">label[<span class="hljs-number">1</span>] !== <span class="hljs-string">'#'</span> ? loadConfigFile_js.underline : loadConfigFile_js.bold</span>) : (<span class="hljs-params">text</span>) =&gt;</span> text;
        <span class="hljs-keyword">const</span> row = <span class="hljs-string">`<span class="hljs-subst">${label}</span>: <span class="hljs-subst">${time.toFixed(<span class="hljs-number">0</span>)}</span>ms, <span class="hljs-subst">${prettyBytes$<span class="hljs-number">1</span>(memory)}</span> / <span class="hljs-subst">${prettyBytes$<span class="hljs-number">1</span>(total)}</span>`</span>;
        <span class="hljs-built_in">console</span>.info(appliedColor(row));
    });
}

<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">build</span>(<span class="hljs-params">inputOptions, warnings, silent = false</span>) </span>{
    <span class="hljs-keyword">const</span> outputOptions = inputOptions.output;
    <span class="hljs-keyword">const</span> useStdout = !outputOptions[<span class="hljs-number">0</span>].file &amp;&amp; !outputOptions[<span class="hljs-number">0</span>].dir;
    <span class="hljs-keyword">const</span> start = <span class="hljs-built_in">Date</span>.now();
    <span class="hljs-keyword">const</span> files = useStdout ? [<span class="hljs-string">'stdout'</span>] : outputOptions.map(<span class="hljs-function"><span class="hljs-params">t</span> =&gt;</span> rollup.relativeId(t.file || t.dir));
    <span class="hljs-keyword">if</span> (!silent) {
        <span class="hljs-keyword">let</span> inputFiles;
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> inputOptions.input === <span class="hljs-string">'string'</span>) {
            inputFiles = inputOptions.input;
        }
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (inputOptions.input <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Array</span>) {
            inputFiles = inputOptions.input.join(<span class="hljs-string">', '</span>);
        }
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> inputOptions.input === <span class="hljs-string">'object'</span> &amp;&amp; inputOptions.input !== <span class="hljs-literal">null</span>) {
            inputFiles = <span class="hljs-built_in">Object</span>.values(inputOptions.input).join(<span class="hljs-string">', '</span>);
        }
        loadConfigFile_js.stderr(loadConfigFile_js.cyan(<span class="hljs-string">`\n<span class="hljs-subst">${loadConfigFile_js.bold(inputFiles)}</span>  <span class="hljs-subst">${loadConfigFile_js.bold(files.join(<span class="hljs-string">', '</span>))}</span>...`</span>));
    }
    <span class="hljs-keyword">const</span> bundle = <span class="hljs-keyword">await</span> rollup.rollup(inputOptions);
    <span class="hljs-keyword">if</span> (useStdout) {
        <span class="hljs-keyword">const</span> output = outputOptions[<span class="hljs-number">0</span>];
        <span class="hljs-keyword">if</span> (output.sourcemap &amp;&amp; output.sourcemap !== <span class="hljs-string">'inline'</span>) {
            loadConfigFile_js.handleError({
                <span class="hljs-attr">code</span>: <span class="hljs-string">'ONLY_INLINE_SOURCEMAPS'</span>,
                <span class="hljs-attr">message</span>: <span class="hljs-string">'Only inline sourcemaps are supported when bundling to stdout.'</span>
            });
        }
        <span class="hljs-keyword">const</span> { <span class="hljs-attr">output</span>: outputs } = <span class="hljs-keyword">await</span> bundle.generate(output);
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> file <span class="hljs-keyword">of</span> outputs) {
            <span class="hljs-keyword">let</span> source;
            <span class="hljs-keyword">if</span> (file.type === <span class="hljs-string">'asset'</span>) {
                source = file.source;
            }
            <span class="hljs-keyword">else</span> {
                source = file.code;
                <span class="hljs-keyword">if</span> (output.sourcemap === <span class="hljs-string">'inline'</span>) {
                    source += <span class="hljs-string">`\n//# <span class="hljs-subst">${rollup.SOURCEMAPPING_URL}</span>=<span class="hljs-subst">${file.map.toUrl()}</span>\n`</span>;
                }
            }
            <span class="hljs-keyword">if</span> (outputs.length &gt; <span class="hljs-number">1</span>)
                process$<span class="hljs-number">1.</span>stdout.write(<span class="hljs-string">`\n<span class="hljs-subst">${loadConfigFile_js.cyan(loadConfigFile_js.bold(<span class="hljs-string">`// <span class="hljs-subst">${file.fileName}</span>:`</span>))}</span>\n`</span>);
            process$<span class="hljs-number">1.</span>stdout.write(source);
        }
        <span class="hljs-keyword">if</span> (!silent) {
            warnings.flush();
        }
        <span class="hljs-keyword">return</span>;
    }
    <span class="hljs-keyword">await</span> <span class="hljs-built_in">Promise</span>.all(outputOptions.map(bundle.write));
    <span class="hljs-keyword">await</span> bundle.close();
    <span class="hljs-keyword">if</span> (!silent) {
        warnings.flush();
        loadConfigFile_js.stderr(loadConfigFile_js.green(<span class="hljs-string">`created <span class="hljs-subst">${loadConfigFile_js.bold(files.join(<span class="hljs-string">', '</span>))}</span> in <span class="hljs-subst">${loadConfigFile_js.bold(ms(<span class="hljs-built_in">Date</span>.now() - start))}</span>`</span>));
        <span class="hljs-keyword">if</span> (bundle &amp;&amp; bundle.getTimings) {
            printTimings(bundle.getTimings());
        }
    }
}

<span class="hljs-keyword">const</span> DEFAULT_CONFIG_BASE = <span class="hljs-string">'rollup.config'</span>;
<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getConfigPath</span>(<span class="hljs-params">commandConfig</span>) </span>{
    <span class="hljs-keyword">if</span> (commandConfig === <span class="hljs-literal">true</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">require</span>$$<span class="hljs-number">0.</span>resolve(<span class="hljs-keyword">await</span> findConfigFileNameInCwd());
    }
    <span class="hljs-keyword">if</span> (commandConfig.slice(<span class="hljs-number">0</span>, <span class="hljs-number">5</span>) === <span class="hljs-string">'node:'</span>) {
        <span class="hljs-keyword">const</span> pkgName = commandConfig.slice(<span class="hljs-number">5</span>);
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">return</span> <span class="hljs-built_in">require</span>.resolve(<span class="hljs-string">`rollup-config-<span class="hljs-subst">${pkgName}</span>`</span>, { <span class="hljs-attr">paths</span>: [process$<span class="hljs-number">1.</span>cwd()] });
        }
        <span class="hljs-keyword">catch</span> (_a) {
            <span class="hljs-keyword">try</span> {
                <span class="hljs-keyword">return</span> <span class="hljs-built_in">require</span>.resolve(pkgName, { <span class="hljs-attr">paths</span>: [process$<span class="hljs-number">1.</span>cwd()] });
            }
            <span class="hljs-keyword">catch</span> (err) {
                <span class="hljs-keyword">if</span> (err.code === <span class="hljs-string">'MODULE_NOT_FOUND'</span>) {
                    loadConfigFile_js.handleError({
                        <span class="hljs-attr">code</span>: <span class="hljs-string">'MISSING_EXTERNAL_CONFIG'</span>,
                        <span class="hljs-attr">message</span>: <span class="hljs-string">`Could not resolve config file "<span class="hljs-subst">${commandConfig}</span>"`</span>
                    });
                }
                <span class="hljs-keyword">throw</span> err;
            }
        }
    }
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">require</span>$$<span class="hljs-number">0.</span>resolve(commandConfig);
}
<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">findConfigFileNameInCwd</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">const</span> filesInWorkingDir = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Set</span>(<span class="hljs-keyword">await</span> <span class="hljs-built_in">require</span>$$<span class="hljs-number">0</span>$<span class="hljs-number">1.</span>promises.readdir(process$<span class="hljs-number">1.</span>cwd()));
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> extension <span class="hljs-keyword">of</span> [<span class="hljs-string">'mjs'</span>, <span class="hljs-string">'cjs'</span>, <span class="hljs-string">'ts'</span>]) {
        <span class="hljs-keyword">const</span> fileName = <span class="hljs-string">`<span class="hljs-subst">${DEFAULT_CONFIG_BASE}</span>.<span class="hljs-subst">${extension}</span>`</span>;
        <span class="hljs-keyword">if</span> (filesInWorkingDir.has(fileName))
            <span class="hljs-keyword">return</span> fileName;
    }
    <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">${DEFAULT_CONFIG_BASE}</span>.js`</span>;
}

<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">loadConfigFromCommand</span>(<span class="hljs-params">command</span>) </span>{
    <span class="hljs-keyword">const</span> warnings = loadConfigFile_js.batchWarnings();
    <span class="hljs-keyword">if</span> (!command.input &amp;&amp; (command.stdin || !process$<span class="hljs-number">1.</span>stdin.isTTY)) {
        command.input = loadConfigFile_js.stdinName;
    }
    <span class="hljs-keyword">const</span> options = mergeOptions.mergeOptions({ <span class="hljs-attr">input</span>: [] }, command, warnings.add);
    <span class="hljs-keyword">await</span> loadConfigFile_js.addCommandPluginsToInputOptions(options, command);
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">options</span>: [options], warnings };
}

<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">runRollup</span>(<span class="hljs-params">command</span>) </span>{
    <span class="hljs-keyword">let</span> inputSource;
    <span class="hljs-keyword">if</span> (command._.length &gt; <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">if</span> (command.input) {
            loadConfigFile_js.handleError({
                <span class="hljs-attr">code</span>: <span class="hljs-string">'DUPLICATE_IMPORT_OPTIONS'</span>,
                <span class="hljs-attr">message</span>: <span class="hljs-string">'Either use --input, or pass input path as argument'</span>
            });
        }
        inputSource = command._;
    }
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> command.input === <span class="hljs-string">'string'</span>) {
        inputSource = [command.input];
    }
    <span class="hljs-keyword">else</span> {
        inputSource = command.input;
    }
    <span class="hljs-keyword">if</span> (inputSource &amp;&amp; inputSource.length &gt; <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">if</span> (inputSource.some(<span class="hljs-function">(<span class="hljs-params">input</span>) =&gt;</span> input.includes(<span class="hljs-string">'='</span>))) {
            command.input = {};
            inputSource.forEach(<span class="hljs-function">(<span class="hljs-params">input</span>) =&gt;</span> {
                <span class="hljs-keyword">const</span> equalsIndex = input.indexOf(<span class="hljs-string">'='</span>);
                <span class="hljs-keyword">const</span> value = input.substring(equalsIndex + <span class="hljs-number">1</span>);
                <span class="hljs-keyword">const</span> key = input.substring(<span class="hljs-number">0</span>, equalsIndex) || rollup.getAliasName(input);
                command.input[key] = value;
            });
        }
        <span class="hljs-keyword">else</span> {
            command.input = inputSource;
        }
    }
    <span class="hljs-keyword">if</span> (command.environment) {
        <span class="hljs-keyword">const</span> environment = <span class="hljs-built_in">Array</span>.isArray(command.environment)
            ? command.environment
            : [command.environment];
        environment.forEach(<span class="hljs-function">(<span class="hljs-params">arg</span>) =&gt;</span> {
            arg.split(<span class="hljs-string">','</span>).forEach(<span class="hljs-function">(<span class="hljs-params">pair</span>) =&gt;</span> {
                <span class="hljs-keyword">const</span> [key, ...value] = pair.split(<span class="hljs-string">':'</span>);
                process$<span class="hljs-number">1.</span>env[key] = value.length === <span class="hljs-number">0</span> ? <span class="hljs-built_in">String</span>(<span class="hljs-literal">true</span>) : value.join(<span class="hljs-string">':'</span>);
            });
        });
    }
    <span class="hljs-keyword">if</span> (mergeOptions.isWatchEnabled(command.watch)) {
        <span class="hljs-keyword">await</span> rollup.loadFsEvents();
        <span class="hljs-keyword">const</span> { watch } = <span class="hljs-keyword">await</span> <span class="hljs-built_in">Promise</span>.resolve().then(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-built_in">require</span>(<span class="hljs-string">'../shared/watch-cli.js'</span>));
        watch(command);
    }
    <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">const</span> { options, warnings } = <span class="hljs-keyword">await</span> getConfigs(command);
            <span class="hljs-keyword">try</span> {
                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> inputOptions <span class="hljs-keyword">of</span> options) {
                    <span class="hljs-keyword">await</span> build(inputOptions, warnings, command.silent);
                }
                <span class="hljs-keyword">if</span> (command.failAfterWarnings &amp;&amp; warnings.warningOccurred) {
                    warnings.flush();
                    loadConfigFile_js.handleError({
                        <span class="hljs-attr">code</span>: <span class="hljs-string">'FAIL_AFTER_WARNINGS'</span>,
                        <span class="hljs-attr">message</span>: <span class="hljs-string">'Warnings occurred and --failAfterWarnings flag present'</span>
                    });
                }
            }
            <span class="hljs-keyword">catch</span> (err) {
                warnings.flush();
                loadConfigFile_js.handleError(err);
            }
        }
        <span class="hljs-keyword">catch</span> (err) {
            loadConfigFile_js.handleError(err);
        }
    }
}
<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getConfigs</span>(<span class="hljs-params">command</span>) </span>{
    <span class="hljs-keyword">if</span> (command.config) {
        <span class="hljs-keyword">const</span> configFile = <span class="hljs-keyword">await</span> getConfigPath(command.config);
        <span class="hljs-keyword">const</span> { options, warnings } = <span class="hljs-keyword">await</span> loadConfigFile_js.loadAndParseConfigFile(configFile, command);
        <span class="hljs-keyword">return</span> { options, warnings };
    }
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> loadConfigFromCommand(command);
}

<span class="hljs-keyword">const</span> command = argParser(process$<span class="hljs-number">1.</span>argv.slice(<span class="hljs-number">2</span>), {
    <span class="hljs-attr">alias</span>: mergeOptions.commandAliases,
    <span class="hljs-attr">configuration</span>: { <span class="hljs-string">'camel-case-expansion'</span>: <span class="hljs-literal">false</span> }
});
<span class="hljs-keyword">if</span> (command.help || (process$<span class="hljs-number">1.</span>argv.length &lt;= <span class="hljs-number">2</span> &amp;&amp; process$<span class="hljs-number">1.</span>stdin.isTTY)) {
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`\n<span class="hljs-subst">${help.replace(<span class="hljs-string">'__VERSION__'</span>, rollup.version)}</span>\n`</span>);
}
<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (command.version) {
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`rollup v<span class="hljs-subst">${rollup.version}</span>`</span>);
}
<span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">try</span> {
        <span class="hljs-built_in">require</span>(<span class="hljs-string">'source-map-support'</span>).install();
    }
    <span class="hljs-keyword">catch</span> (_a) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-106" id="section-106"></a>
</div>
<p>do nothing</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    }
    runRollup(command);
}

exports.getConfigPath = getConfigPath;
exports.loadConfigFromCommand = loadConfigFromCommand;
exports.ms = ms;
exports.printTimings = printTimings;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap" id="sourcemappingurlrollup.map">
  <h1>
    <a href="#sourcemappingurlrollup.map" name="sourcemappingurlrollup.map" class="pilcrow"></a>
sourceMappingURL=rollup.map
  </h1>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
</pre>
        </td>
      </tr>
    
  </tbody>
</table>

  </div>
</body>
</html>
